## 1. IAM 소개: 사용자, 그룹, 정책
---
#### 1. **IAM 개요**

- IAM은 **Identity and Access Management**의 약자.
- AWS 계정에서 **사용자와 그룹을 생성**하고, **권한을 관리**할 수 있음.
- **글로벌 서비스**: 리전 구분 없이 사용 가능.

---

#### 2. **IAM의 핵심 개념**

1. **루트 사용자**:
    
    - AWS 계정을 생성할 때 기본 생성.
    - **최소 사용 원칙**: 계정 생성 이후 루트 사용자는 더 이상 사용하거나 공유하지 않음.
2. **사용자(User)**:
    
    - **조직 내 개인**을 나타냄.
    - 특정 작업을 수행할 권한 부여 가능.
3. **그룹(Group)**:
    
    - **사용자들의 모임**으로, 동일한 권한을 공유하도록 구성.
    - 그룹에는 **다른 그룹을 포함할 수 없음**.
    - 한 사용자는 **여러 그룹에 속할 수 있음**.
4. **IAM 정책 (IAM Policies)**:
    
    - **JSON 문서** 형식으로 권한을 정의.
    - 사용자가 **특정 작업 및 서비스에 접근**하도록 허용하거나 거부.
    - 예: EC2 사용, Describe 작업, CloudWatch 접근 등.
    - **최소 권한 원칙** 적용:
        - 꼭 필요한 권한만 부여하여 비용 및 보안 문제 방지.

---

#### 3. **IAM 사용 예시**

- **사용자 및 그룹 예제**:
    
    - Alice, Bob, Charles → `Developers` 그룹.
    - David, Edward → `Operations` 그룹.
    - Fred → **그룹 미속성 사용자** (비추천).
- **다중 그룹**:
    
    - Charles와 David은 `Developers`와 `Audit` 그룹에 모두 속할 수 있음.
- **정책 예시 (JSON)**:
    
    ```json
    {
        "Version": "2012-10-17",
        "Statement": [
            {
                "Effect": "Allow",
                "Action": [
                    "ec2:Describe*",
                    "elasticloadbalancing:Describe*",
                    "cloudwatch:Describe*"
                ],
                "Resource": "*"
            }
        ]
    }
    ```
    

---

#### 4. **IAM의 원칙**

- **최소 권한 원칙**:
    - 사용자에게 꼭 필요한 권한만 부여.
    - 불필요한 서비스 실행 및 보안 사고 방지.


## 2. IAM 사용자 및 그룹 실습
---
#### 1. **IAM 사용자 생성 과정**

1. **IAM 콘솔 접속**:
    
    - AWS 검색창에서 "IAM" 검색 후 대시보드로 이동.
    - **IAM은 글로벌 서비스**로, 리전 선택이 필요 없음.
2. **새 사용자 생성**:
    
    - IAM 대시보드 → **Users** → **Add user** 클릭.
    - 사용자 이름 입력(예: Stephane).
    - **AWS Management Console 접근 허용**:
        - 비밀번호 설정 (자동 생성 또는 사용자 정의 선택 가능).
        - "사용자가 다음 로그인 시 비밀번호 변경" 옵션 설정 여부 선택.
3. **그룹 생성 및 권한 부여**:
    
    - 새 그룹 생성(예: `admin`).
    - 권한 정책 추가(예: `Administrator Access`).
    - 사용자를 생성된 그룹에 추가.
4. **태그 추가 (선택 사항)**:
    
    - 예: `Key: Department`, `Value: Tech`.
5. **설정 검토 후 사용자 생성**:
    
    - 생성 완료 후 로그인 정보를 다운로드(CSV) 또는 복사.

---

#### 2. **IAM 사용자 로그인**

1. **로그인 URL 생성**:
    
    - **로그인 별칭 생성**(예: `aws-stephane-v5`)으로 URL 간소화.
    - 로그인 URL: `https://aws-account-alias.signin.aws.amazon.com/console`.
2. **로그인 방법**:
    
    - **IAM 사용자 로그인 페이지**에서 별칭 또는 계정 ID 입력.
    - 사용자 이름 및 비밀번호 입력 후 로그인.
3. **브라우저 활용 팁**:
    
    - 루트 계정과 IAM 사용자 계정을 동시에 사용하려면 **시크릿 모드** 활용.

---

#### 3. **루트 사용자와 IAM 사용자 비교**

1. **루트 사용자**:
    
    - 계정 생성 시 기본 생성.
    - **최소 사용 권장**: 계정 설정과 같은 특정 작업에만 사용.
2. **IAM 사용자**:
    
    - 일반적인 AWS 사용 및 관리를 위해 생성.
    - 그룹 및 정책을 통해 권한 관리.
    - **보안 강화**: 루트 계정 사용 대신 IAM 사용자 사용 권장.

---

#### 4. **IAM 사용 권장 사항**

- 루트 계정은 계정 관리 작업(예: 결제 정보 수정)에만 사용.
- 일반 작업 및 서비스 관리는 IAM 사용자를 통해 수행.
- IAM 사용자를 그룹에 추가하여 권한을 일괄 관리.
- **최소 권한 원칙** 적용:
    - 필요 이상의 권한을 부여하지 않음.


## 3. IAM 정책
---
#### 1. **IAM 정책 적용 시나리오**

1. **그룹 레벨 정책 적용**:
    
    - **개발자 그룹**: Alice, Bob, Charles.
        - 그룹에 연결된 정책은 모든 구성원(Alice, Bob, Charles)에게 **상속**.
    - **운영자 그룹**: David, Edward.
        - 운영자 그룹에는 개발자 그룹과 **다른 정책** 적용.
2. **인라인 정책**:
    
    - **Fred**와 같이 그룹에 속하지 않은 사용자에게 직접 정책 연결 가능.
    - **특정 사용자에 대한 맞춤형 권한 제공**.
3. **다중 그룹 정책 적용**:
    
    - Charles와 David가 감사팀에도 속할 경우:
        - Charles는 개발자 그룹 + 감사팀 정책 상속.
        - David는 운영자 그룹 + 감사팀 정책 상속.

---

#### 2. **IAM 정책 구조**

IAM 정책은 **JSON 문서** 형식으로 작성되며, 주요 구성 요소는 다음과 같습니다:

1. **Version**:
    
    - 정책 언어 버전을 정의.
    - 일반적으로 `2012-10-17` 사용.
2. **Statement**:
    
    - 정책의 핵심 구성 요소.
    - 여러 개의 문장(Statement)을 포함 가능.
3. **Statement의 필수 요소**:
    
    - **Sid** (Statement ID):
        - 문장을 식별하는 선택적 ID.
    - **Effect**:
        - API 접근 허용(`Allow`) 또는 거부(`Deny`) 여부.
    - **Principal**:
        - 정책이 적용되는 사용자, 계정, 역할.
    - **Action**:
        - 허용 또는 거부되는 **API 호출** 목록.
        - 예: `s3:PutObject`, `ec2:StartInstances`.
    - **Resource**:
        - 정책이 적용되는 AWS 리소스 목록.
        - 예: 특정 S3 버킷(`arn:aws:s3:::example-bucket`).
    - **Condition** (선택 사항):
        - 특정 조건에서만 정책이 적용되도록 제한.

---

#### 3. **IAM 정책 예시 (JSON)**

```json
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Sid": "1",
            "Effect": "Allow",
            "Principal": {
                "AWS": "arn:aws:iam::123456789012:root"
            },
            "Action": [
                "s3:PutObject",
                "s3:GetObject"
            ],
            "Resource": "arn:aws:s3:::example-bucket/*"
        }
    ]
}
```

**구성 요소 설명**:

- **Version**: 정책의 버전.
- **Sid**: "1"로 문장을 식별.
- **Effect**: `Allow`로 S3 작업 허용.
- **Principal**: AWS 계정의 루트 계정(`123456789012`).
- **Action**: `s3:PutObject` 및 `s3:GetObject` 작업 허용.
- **Resource**: S3 버킷 `example-bucket`의 모든 객체.

---

#### 4. **정책 작성 및 시험 대비 포인트**

- **Effect**: 허용 또는 거부의 목적을 결정.
- **Principal**: 정책 대상 지정.
- **Action**: 허용/거부되는 작업 목록.
- **Resource**: 특정 리소스에 대한 정책 적용.
- **Condition**: 특정 조건에서만 정책 적용(시험에 자주 출제).


## 4. IAM 정책 실습
---
#### 1. **IAM 정책의 유형 및 적용 방식**

1. **그룹 기반 정책**:
    
    - 사용자를 그룹에 추가하면, 그룹에 첨부된 **정책을 상속**.
    - 예: `Stephane`은 `admin` 그룹의 `AdministratorAccess` 권한을 상속받음.
    - 그룹에서 사용자를 삭제하면 정책 권한도 제거.
2. **직접 첨부 정책**:
    
    - 특정 사용자에게 **직접적으로 정책 첨부 가능**.
    - 예: `IAMReadOnlyAccess`를 Stephane 사용자에 직접 연결.
3. **정책의 계층적 적용**:
    
    - 사용자는 여러 그룹에서 정책을 상속받거나 직접 첨부된 정책을 모두 적용받음.
    - 예: `Stephane`이 `admin` 그룹과 `developers` 그룹에 속할 경우, 두 그룹의 정책을 모두 상속.

---

#### 2. **IAM 정책의 구성 및 분석**

IAM 정책은 **JSON 문서** 형식으로 정의되며, 주요 구성 요소는 다음과 같습니다:

1. **기본 정책 구조**:
    
    ```json
    {
        "Version": "2012-10-17",
        "Statement": [
            {
                "Effect": "Allow",
                "Action": [
                    "iam:ListUsers",
                    "iam:GetUser"
                ],
                "Resource": "*"
            }
        ]
    }
    ```
    
2. **구성 요소**:
    
    - **Effect**: `Allow`(허용) 또는 `Deny`(거부).
    - **Action**: 허용/거부되는 **API 호출** 목록.
        - 예: `iam:ListUsers`, `iam:GetUser`.
    - **Resource**: 정책이 적용되는 AWS 리소스.
        - `*`은 모든 리소스를 의미.
    - **Condition**(선택 사항): 정책 적용 조건.

---

#### 3. **정책 관리 실습**

1. **정책 첨부 및 제거**:
    
    - 사용자 `Stephane`에 직접 정책 첨부(`IAMReadOnlyAccess`).
    - 정책 제거 후, 권한 변경 확인(예: `IAM:ListUsers` 권한 없음).
2. **JSON 정책 확인**:
    
    - `AdministratorAccess` 정책:
        - 모든 서비스와 리소스에 대해 전체 액세스(`Action: "*", Resource: "*"`) 허용.
    - `IAMReadOnlyAccess` 정책:
        - IAM에서 `List*` 및 `Get*` 호출 허용.
        - 예: `iam:ListUsers`, `iam:GetUser`.
3. **Visual Editor로 정책 생성**:
    
    - 액션 추가: `ListUsers`, `GetUser`.
    - 리소스 선택: `*` 또는 특정 리소스.
    - 정책 생성 후 JSON 확인.

---

#### 4. **정책 관리 전략**

1. **최소 권한 원칙**:
    
    - 사용자에게 반드시 필요한 권한만 제공.
    - 예: `IAMReadOnlyAccess`로 읽기 전용 권한만 부여.
2. **정책 계층화**:
    
    - 그룹 정책을 우선 사용하여 관리 간소화.
    - 필요 시 특정 사용자에 직접 정책 첨부.
3. **정책 유지보수**:
    
    - 불필요한 그룹 삭제.
    - 더 이상 사용하지 않는 정책 제거.

---

#### 5. **강의 요약 및 실습 결과**

- **Stephane 사용자 권한 확인**:
    
    - `admin` 그룹의 `AdministratorAccess` 권한만 유지.
    - IAM 콘솔에서 모든 권한 정상 작동 확인.
- **정책 생성 및 관리 연습**:
    
    - Visual Editor와 JSON을 활용하여 정책 생성 및 첨부.


## 5. IAM MFA 개요
---
#### 1. **비밀번호 정책 (Password Policy)**

AWS는 계정 보안을 강화하기 위해 **비밀번호 정책** 설정을 제공합니다.

1. **설정 가능한 요소**:
    
    - **최소 비밀번호 길이**: 비밀번호의 최소 길이를 정의.
    - **특정 문자 요구**: 대문자, 소문자, 숫자, 특수 문자 포함 여부 설정.
    - **비밀번호 변경 허용 여부**: 사용자가 비밀번호를 변경할 수 있는지 결정.
    - **비밀번호 만료**:
        - 비밀번호 변경 주기를 설정(예: 90일).
    - **비밀번호 재사용 방지**:
        - 이전에 사용했던 비밀번호로 변경 방지.
2. **효과**:
    
    - 무차별 대입 공격(Brute Force Attack) 방지.
    - 사용자의 비밀번호 관리 수준 향상.

---

#### 2. **다중 인증 (Multi-Factor Authentication, MFA)**

**MFA**는 비밀번호와 추가 인증 장치를 조합하여 보안을 강화하는 방식입니다.

1. **MFA의 개념**:
    
    - **두 가지 요소 조합**:
        1. **비밀번호**(사용자가 알고 있는 정보).
        2. **보안 장치**(사용자가 소유한 물리적 장치 또는 가상 인증 앱).
    - 비밀번호 유출 시에도 물리적 장치 없이는 접근 불가.
2. **MFA의 장점**:
    
    - 비밀번호 도난이나 해킹으로부터 계정 보호.
    - 루트 계정 및 IAM 사용자 보호 강화.
3. **MFA 로그인 과정**:
    
    - 사용자(예: Alice)가 비밀번호와 MFA 생성 토큰(예: Google Authenticator)을 입력.
    - 두 가지 인증 성공 시 AWS 계정 접근 허용.

---

#### 3. **AWS에서 사용 가능한 MFA 장치**

1. **가상 MFA 장치**:
    
    - **소프트웨어 기반**:
        - Google Authenticator, Authy 등 MFA 앱 사용.
        - 한 기기에서 다수의 사용자와 계정 지원.
    - **장점**:
        - 무료 및 설정 간편.
        - 여러 사용자와 계정을 단일 장치에서 관리 가능.
2. **유니버설 세컨드 팩터(UTF) 보안 키**:
    
    - **물리적 장치**:
        - 유비키(YubiKey) 같은 타사 제품 사용.
    - **장점**:
        - 높은 보안성.
        - 한 키로 여러 사용자 및 계정 지원.
3. **하드웨어 보안 토큰 MFA**:
    
    - **타사 제품**(예: 젬알토 제공).
    - **장점**:
        - 물리적 토큰 기반 보안 강화.
4. **GovCloud 보안 토큰**:
    
    - 미국 정부 클라우드용.
    - 타사 제품(예: SurePassID).

---

#### 4. **MFA 적용 권장 대상**

1. **루트 사용자**:
    - 모든 계정 설정 및 서비스 관리 권한을 보유하므로 필수.
2. **IAM 사용자**:
    - 관리 작업을 수행하거나 중요한 리소스에 접근하는 경우 적용.

## 6. IAM MFA 실습
---
#### 1. **비밀번호 정책 설정**

AWS 계정 보안을 강화하기 위해 **비밀번호 정책**을 정의할 수 있습니다.

1. **설정 방법**:
    
    - **계정 설정** → **비밀번호 정책** → **편집**.
    - 사용자 지정 정책을 설정하여 계정 보안을 강화.
2. **설정 가능한 옵션**:
    
    - **비밀번호 최소 길이**: 비밀번호의 최소 문자 수.
    - **특정 문자 요구**: 대문자, 소문자, 숫자, 특수 문자 포함 요구.
    - **비밀번호 만료**:
        - 비밀번호가 90일 후 만료되도록 설정.
        - 만료 후 비밀번호 재설정 옵션(관리자 또는 사용자).
    - **비밀번호 재사용 방지**: 이전 비밀번호로의 변경 방지.
3. **효과**:
    
    - 강력한 비밀번호 요구를 통해 무차별 대입 공격 방지.
    - 정기적인 비밀번호 변경으로 계정 보안 유지.

---

#### 2. **MFA(Multi-Factor Authentication) 설정**

**MFA**는 비밀번호와 보안 장치를 조합하여 계정 보안을 한층 강화합니다.

1. **MFA 설정 방법**:
    
    - **보안 자격 증명** → **MFA 활성화** → **MFA 장치 할당**.
    - MFA 장치 이름 지정(예: `MyiPhone`).
    - **장치 유형 선택**:
        - 인증 앱 (Google Authenticator, Twilio Authy 등).
        - 보안 키 (유비키 등).
        - 하드웨어 TOTP 토큰.
2. **가상 MFA 장치 설정**:
    
    - 인증 앱 설치(예: Twilio Authy).
    - AWS에서 제공된 **QR 코드**를 앱으로 스캔.
    - 생성된 MFA 코드를 두 번 입력하여 인증.
3. **MFA 설정 완료**:
    
    - MFA 장치가 활성화되었음을 확인.
    - 최대 8개의 MFA 장치를 추가 가능.
4. **MFA 제거 방법**:
    
    - **MFA 장치 목록**에서 선택 후 제거.

---

#### 3. **MFA 사용 과정**

1. **로그인 프로세스**:
    
    - AWS 로그인 시 비밀번호 입력.
    - **MFA 코드** 입력(실시간으로 생성된 인증 코드).
    - 코드가 정확하면 로그인 성공.
2. **효과**:
    
    - 비밀번호 도난 시에도 보안 장치 없이는 로그인 불가.
    - 계정 보안이 비밀번호만 사용할 때보다 크게 강화.

---

#### 4. **주의사항**

1. **MFA 장치 분실 시**:
    
    - MFA 장치가 분실되면 계정 잠금 가능성 있음.
    - AWS 지원팀을 통해 복구 필요.
2. **MFA 백업 계획**:
    
    - 중요한 MFA 장치는 잘 보관.
    - 필요 시 MFA를 제거하거나 새 장치로 교체 가능.


## 7. AWS 액세스 키, CLI 및 SDK
---

AWS에 접근하는 방법은 크게 **3가지**입니다.

#### 1. **AWS Management Console**

- **웹 인터페이스**를 통해 AWS 리소스에 접근.
- 사용자 이름, 비밀번호, **MFA**(Multi-Factor Authentication)로 보호.
- **직관적 UI**로 작업 수행.

---

#### 2. **AWS CLI (Command Line Interface)**

1. **CLI란?**
    
    - 명령줄 셸에서 **AWS 서비스와 상호작용**할 수 있는 도구.
    - AWS API를 명령어로 직접 호출 가능.
    - 예: `aws s3 cp file.txt s3://mybucket/` (파일 업로드 명령어).
2. **CLI의 주요 특징**:
    
    - AWS 서비스의 **공용 API**에 직접 액세스.
    - 반복 작업을 자동화하는 **스크립트** 작성 가능.
    - **오픈 소스**: GitHub에서 소스 코드 확인 가능.
3. **CLI 사용 이유**:
    
    - **작업 효율성**: GUI 대신 빠르고 간결한 작업 가능.
    - **자동화**: 반복 작업을 스크립트로 처리.
4. **보안**:
    
    - **액세스 키**(Access Key)로 보호.
        - **Access Key ID**: 사용자 이름과 유사.
        - **Secret Access Key**: 비밀번호처럼 보호해야 함.
    - **공유 금지**: 보안 유지 및 권한 관리.

---

#### 3. **AWS SDK (Software Development Kit)**

1. **SDK란?**
    
    - 특정 프로그래밍 언어에 맞는 **AWS 라이브러리 집합**.
    - AWS 서비스 및 API에 애플리케이션 코드로 액세스 가능.
2. **SDK 사용 특징**:
    
    - 애플리케이션 내에서 **프로그래밍 방식으로 AWS 호출**.
    - **다양한 언어 지원**:
        - JavaScript, Python(Boto), PHP, .NET, Ruby, Java, Go, Node.js, C++.
    - 모바일 SDK: Android, iOS.
    - IoT SDK: 사물 인터넷 장치 지원.
3. **예시**:
    
    - Python용 AWS SDK(Boto3)를 사용해 AWS 리소스를 관리.
    - AWS CLI 자체도 **Python Boto3 SDK** 기반으로 개발.

---

#### 4. **AWS CLI vs SDK**

|특징|CLI|SDK|
|---|---|---|
|**사용 방식**|명령줄 명령어|애플리케이션 코드|
|**주요 목적**|AWS API 호출 및 작업 자동화|애플리케이션 내 AWS 서비스 통합|
|**보호 메커니즘**|액세스 키|액세스 키|
|**대상 사용자**|DevOps, 관리자|개발자, 프로그래머|


## 8. 윈도우 / 맥에서  AWS CLI 설정
---
### Windows에서 AWS CLI 설치 요약

---

#### 1. **AWS CLI 설치 준비**

1. **설치 버전**:
    
    - AWS CLI 버전 2 설치(최신 버전 사용 권장).
    - 버전 1에서 성능과 기능이 향상된 최신 버전.
2. **AWS CLI 다운로드 링크**:
    
    - Google 검색: "AWS CLI install Windows".
    - AWS CLI 공식 페이지에서 **MSI 인스톨러** 다운로드.

---

#### 2. **설치 과정**

1. **MSI 인스톨러 실행**:
    
    - 다운로드한 파일을 실행.
    - 설치 마법사가 열리면 다음 단계를 진행.
2. **설치 단계**:
    
    - **Next** 클릭.
    - **라이선스 동의** → **Install** 클릭.
    - 설치 진행 후 **Finish** 클릭.

---

#### 3. **설치 확인**

1. **명령줄 실행**:
    
    - Windows 검색창에서 **cmd** 입력 → 명령줄 열기.
2. **버전 확인**:
    
    - 명령어 입력: `aws --version`.
    - 출력 예시:
        
        ```
        aws-cli/2.x.x Python/3.x.x Windows/x86_64
        ```
        
    - 출력 결과에 **버전 2**가 표시되면 설치 성공.

---

#### 4. **업그레이드 방법**

- AWS CLI를 최신 버전으로 업그레이드하려면:
    - **MSI 인스톨러**를 다시 다운로드 및 실행.
    - 기존 설치를 자동으로 업그레이드.

---

### Mac에서 AWS CLI 설치
---
`brew install awscli`


## 9. 