# 기술문서 심층 분석 요청 - 개선된 프롬프트

## 원본 프롬프트 (Before)

```
이 프로젝트의 개발문서를 분석해서 기술스택의 문제점, 기술 버전이 latest 버전인가?,
오늘날짜기준 가장 효율적이고 현대적인 기술스텍인가?, 아니면 더 좋은 다른 기술 스택이 있나?,
서로 기술스택 간의 버전 호환성, 안정성 문제는 없나?, 코드의 문제점, UI/UX 문제점,
배포시 문제점, 향후 다른기능 추가 시 문제점, 프로덕션 환경에서 문제점 들을
심층적으로 조사해서 md 파일로 만들어줘
```

## 원본 프롬프트의 문제점 분석

|문제|설명|영향|
|---|---|---|
|**단일 나열 구조**|10개 이상의 분석 항목이 쉼표로 나열|Claude Code가 우선순위를 판단할 수 없어 깊이 없는 나열식 응답 가능|
|**기대 결과물 미정의**|"심층적으로 조사"만 명시|표, 코드 예시, 비교 매트릭스 등 구체적 포맷 없이 텍스트 나열 가능|
|**문서 간 교차검증 누락**|각 문서를 개별 분석하라는 지시만 존재|PRD↔Architecture 간 불일치, Stories↔UI/UX 간 갭을 놓칠 수 있음|
|**버전 검증 기준 미명시**|"latest 버전인가?"만 질문|stable/LTS/latest/canary 중 어떤 기준인지 불분명|
|**심각도 등급 없음**|모든 이슈가 동등하게 취급|Critical 배포 차단 이슈와 minor 개선점이 뒤섞임|
|**액션 아이템 없음**|발견만 요청, 해결 방안 미요청|이슈만 나열되고 실행 가능한 수정 방법이 빠짐|

---

## 개선된 프롬프트 (After)

```markdown
# 역할 및 맥락

너는 시니어 풀스택 개발자이자 기술 아키텍트 역할로, 이 프로젝트의 모든 개발문서
(PRD, Architecture, UI/UX, Stories 등)를 **교차 검증(cross-reference)** 하면서
심층 기술 감사(Technical Audit)를 수행해야 한다.

이 문서들은 **Claude Code에 전달하여 실제 개발을 진행할 문서**이므로,
Claude Code가 개발 시 마주칠 수 있는 기술적 리스크를 사전에 식별하는 것이 핵심 목적이다.

---

# 분석 수행 규칙

1. **모든 분석 항목에 심각도 등급을 부여**할 것:
   - 🔴 **CRITICAL**: 배포 불가 또는 서비스 장애 유발. 즉시 수정 필요
   - 🟡 **WARNING**: 기능은 작동하나 성능/보안/유지보수에 문제. 개발 중 수정 권장
   - 🔵 **INFO**: 개선하면 좋으나 필수는 아님. 백로그 등록 추천

2. **각 이슈에는 반드시 다음을 포함**할 것:
   - 이슈 설명 (무엇이 문제인가)
   - 근거 (왜 문제인가 - 공식문서, 벤치마크, 호환성 매트릭스 등 참조)
   - 영향 범위 (어떤 기능/문서/컴포넌트에 영향을 미치는가)
   - 권장 수정 방안 (구체적인 코드/설정 변경 포함)

3. **문서 간 불일치를 반드시 검출**할 것:
   - PRD에 명시된 기능이 Architecture에 반영되지 않은 경우
   - Architecture의 기술스택이 Stories의 구현 요구사항과 맞지 않는 경우
   - UI/UX 설계가 기술적으로 구현 불가능하거나 비효율적인 경우

---

# 분석 섹션 (아래 순서대로 분석)

## 섹션 1: 기술스택 감사 (Tech Stack Audit)

### 1-1. 버전 현황 및 최신성 검증
- 프로젝트에 명시된 모든 기술의 **현재 버전 vs 문서 명시 버전** 비교표 작성
- 각 기술의 **LTS/Stable 최신 버전** 기준으로 판단 (latest가 아닌 stable 기준)
- 버전이 오래된 경우: EOL(End of Life) 여부, 보안 패치 지원 여부 명시
- **출력 형식**: 비교 테이블

| 기술 | 문서 명시 버전 | 현재 Stable/LTS | 차이 | 심각도 | 비고 |
|------|--------------|----------------|------|--------|------|

### 1-2. 기술스택 간 호환성 매트릭스
- 주요 기술 간 **공식 호환성** 확인 (예: Next.js 15 + React 19, Drizzle + PostgreSQL 버전 등)
- **알려진 호환성 이슈** 나열 (GitHub Issues, 공식 Changelog 기반)
- **peer dependency 충돌** 가능성 분석

### 1-3. 대안 기술스택 비교
- 현재 스택의 각 기술에 대해 **더 적합한 대안**이 있는지 평가
- 프로젝트 요구사항(PRD 기반)과의 적합성 비교
- **출력 형식**: 비교 테이블 (현재 선택 vs 대안 1~2개, 장단점)

---

## 섹션 2: 아키텍처 분석 (Architecture Review)

### 2-1. 아키텍처 설계 문제점
- 확장성(Scalability) 병목 지점
- 단일 장애점(Single Point of Failure)
- 데이터 흐름의 비효율성
- 보안 취약점 (인증/인가 흐름, API 보안 등)

### 2-2. 프로덕션 환경 리스크
- 환경 변수/시크릿 관리 방식
- 로깅, 모니터링, 에러 핸들링 전략
- 데이터베이스 마이그레이션 전략
- 캐싱 전략 유무 및 적절성
- Rate Limiting, DDoS 방어

### 2-3. 배포 파이프라인 분석
- CI/CD 파이프라인 정의 유무 및 완성도
- 환경별(dev/staging/production) 분리 전략
- 롤백 전략
- 블루-그린 또는 카나리 배포 지원 여부

---

## 섹션 3: 코드 품질 분석 (Code Quality Review)

- 코드/스키마 정의에서 발견되는 **안티패턴**
- 타입 안전성(Type Safety) 이슈
- 에러 처리 패턴의 일관성
- 테스트 전략 유무 (단위/통합/E2E)
- 코드 구조가 Claude Code의 자동 생성에 적합한지 여부

---

## 섹션 4: UI/UX 기술 구현성 분석

- UI/UX 문서의 디자인이 현재 기술스택으로 **효율적으로 구현 가능한지** 평가
- 반응형(Responsive) 설계의 완성도
- 접근성(a11y) 준수 여부
- 성능 최적화 고려 (이미지 최적화, 레이지 로딩, 코드 스플리팅 등)
- 국제화(i18n) 지원 설계 유무

---

## 섹션 5: 확장성 및 유지보수성 분석

- 새로운 기능 추가 시 예상되는 **아키텍처적 제약**
- 모듈화/분리 수준 (느슨한 결합 vs 강한 결합)
- API 버전 관리 전략
- 서드파티 서비스 의존도 및 대체 전략

---

## 섹션 6: 문서 간 교차 검증 결과 (Cross-Reference Findings)

- PRD ↔ Architecture 불일치 목록
- Architecture ↔ Stories 불일치 목록
- Stories ↔ UI/UX 불일치 목록
- **누락된 기능/요구사항** 목록

---

## 섹션 7: 종합 권장사항 (Executive Summary)

- **즉시 수정 필요 항목** (🔴 CRITICAL 모아보기)
- **개발 전 수정 권장 항목** (🟡 WARNING 모아보기)
- **우선순위 기반 액션 플랜** (수정 순서 및 예상 소요 시간)
- **전체 기술 건강도 점수** (100점 만점)

---

# 출력 형식

- **파일 형식**: Markdown (.md)
- **각 섹션은 접기(collapsible) 가능하도록** `<details>` 태그 사용
- **모든 비교는 테이블 형식** 사용
- **코드 수정이 필요한 경우** before/after 코드 블록 포함
- **외부 참조(공식문서 URL 등)** 가능한 한 포함
```

---

## 프롬프트 개선 포인트 요약

### 구조적 개선

- **역할 지정**: "시니어 풀스택 개발자이자 기술 아키텍트"로 역할을 명확히 정의하여 분석 깊이를 강제
- **맥락 설명**: "Claude Code에 전달할 문서"라는 목적을 명시하여 분석 방향성 확보
- **섹션 분리**: 10개 이상의 나열 항목을 7개 대섹션 + 하위 항목으로 체계화

### 분석 품질 개선

- **심각도 등급**: 🔴🟡🔵 3단계로 이슈 우선순위 즉시 파악 가능
- **이슈 구조화**: 설명→근거→영향→수정방안 4단계 구조 강제
- **교차 검증**: 문서 간 불일치를 독립 섹션으로 분리하여 누락 방지
- **버전 기준 명확화**: "latest"가 아닌 "LTS/Stable" 기준으로 판단 기준 구체화

### 실행력 개선

- **출력 형식 지정**: 비교 테이블, before/after 코드 블록, `<details>` 태그 등 구체적 포맷 요구
- **액션 플랜 포함**: 이슈 발견에 그치지 않고 수정 순서와 예상 소요 시간까지 요청
- **건강도 점수**: 전체 프로젝트의 기술 성숙도를 한눈에 파악 가능

---

## 사용법

1. 위의 **개선된 프롬프트**를 복사
2. 프로젝트의 개발문서(PRD, Architecture, UI/UX, Stories 등)와 함께 Claude에 전달
3. Claude가 모든 문서를 교차 분석하여 구조화된 감사 보고서를 생성