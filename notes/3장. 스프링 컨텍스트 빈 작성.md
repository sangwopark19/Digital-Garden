# 3장. 스프링 컨텍스트 빈 작성
---
- 스프링 컨텍스트는 프레임워크가 관리하는 객체를 유지하는 데 사용되는 앱 메모리 공간이다. 프레임워크가 제공하는 기능으로 스프링 컨텍스트에서 보강해야 하는 모든 객체를 추가 해야 한다.
- 앱을 구현할 때는 한 객체에서 다른 객체를 참조해야 한다. 이것으로 한 객체가 자신의 책임을 실행할 때 다른 객체에 작업을 위임할 수 있다. 이 동작을 구현하려면 스프링 컨텍스트에서 빈 간 관계를 설정해야 한다.
- 다음 세 가지 방식 중 하나를 사용하여 두 빈간 관계를 설정할 수 있다.
	- 빈을 생성하는 메서드에서 다른 빈을 생성하는 @Bean 애너테이션된 메서드를 직접 참조한다. 스프링은  컨텍스트에서 사용자가 빈을 참조한다는 것을 알고 있으며, 빈이 이미 있을 때는 동일한 메서드를 다시 호출하여 다른 인스턴스를 생성하지 않는 대신 컨텍스트에서 기존 빈에 대한 참조를 반환한다.
	- @Bean 애너테이션된 메서드에 매개변수를 정의한다. 스프링은 이 @Bean이 지정된 메서드에서 매개변수를 발견하면 해당 매개변수 타입의 빈을 컨텍스트에서 검색하고 해당 빈을 매개변수 값으로 전달한다.
	- @Autowired 애너테이션을 사용하는 방식은 다음 세 가지다.
		- 컨텍스트에서 빈을 주입하도록 스프링에 지시하려는 클래스의 필드에 @Autowired 애너테이션을 추가한다. 이 방식은 예제와 개념 증명(PoC)에서 자주 사용된다.
		- 빈을 생성하기 위해 스프링이 호출할 생성자에 @Autowired 애너테이션을 추가한다. 스프링은 컨텍스트에 있는 다른 빈을 생성자의 매개변수로 주입한다. 이 방식은 실제 코드에서 **가장 많이 사용**된다.
		- 스프링이 컨텍스트에서 빈을 주입하려는 속성의 setter에 @Autowired 애너테이션을 추가한다. 이 방식은 프로덕션 수준의 코드에서는 자주 사용되지 않는다.
- 스프링에서 클래스의 속성이나 메서드 또는 생성자 매개변수를 사용하여 값이나 참조를 제공하도록 허용할 떄는 스프링이 IoC 원칙으로 지원되는 기술인 DI를 사용한다고 할 수 있다.
- 서로 의존하는 빈 두 개를 생성하면 순환 의존성이 발생한다. 스프링은 순환 의존성이 있는 빈은 생성할 수 없고, 예외를 발생시키며 실행은 실패한다. 빈을 구성할 때는 순환 의존성을 피해야한다.
- 컨텍스트에 타입이 동일한 빈이 두 개 이상 있을 때 스프링은 그중 어떤 빈을 주입해야 하는지 정하지 못한다. 주입해야 할 인스턴스를 스프링에 알려 주는 방법은 다음과 같다.
	- 의존성 주입을 위해 빈 중 하나를 기본값으로 표시하는 @Primary 애너테이션을 사용한다.
	- 빈 이름을 지정하고 @Qualifier 애너테이션을 사용하여 빈 이름으로 주입한다.