# 코드베이스 심층 분석 요청 프롬프트

## 사용법

- `[대괄호]` 안의 내용을 프로젝트에 맞게 수정하세요
- 분석 영역 중 불필요한 항목은 삭제하세요
- 프롬프트 하단의 "선택적 추가 지시" 중 필요한 것만 포함하세요

---

## 프롬프트 본문

```
## 프로젝트 컨텍스트

- **프로젝트명**: [프로젝트명]
- **기술 스택**: [예: Next.js 15 + TypeScript + Drizzle ORM + Supabase + Tailwind CSS]
- **프로젝트 단계**: [MVP 개발 중 / 베타 테스트 / 프로덕션 운영 중]
- **배포 환경**: [예: Vercel + Supabase Cloud / AWS EC2 + Docker]
- **주요 기능**: [예: 실시간 채팅, WebRTC 영상통화, 다국어 번역, 소셜 로그인]
- **현재 알려진 이슈**: [있다면 기술, 없으면 "없음"]

---

## 분석 요청

이 프로젝트의 전체 코드베이스를 아래 7개 영역에 대해 심층 분석하고,
발견된 이슈마다 **심각도(Critical/High/Medium/Low)** 를 반드시 부여해주세요.

### 1. 코드 품질 & 아키텍처
- 디렉토리 구조와 모듈 분리의 적절성
- 네이밍 컨벤션 일관성
- 타입 안전성 (any 남용, 타입 누락, 불완전한 제네릭 등)
- 중복 코드 및 추상화 부족
- 에러 핸들링 패턴 (try-catch 누락, 에러 전파 방식, 사용자 피드백)
- 안티패턴 및 코드 스멜 (순환 의존성, God Component, Prop Drilling 등)
- 비동기 처리의 적절성 (race condition, 메모리 누수 가능성)

### 2. 보안
- 인증/인가 취약점 (토큰 관리, 세션 처리, 권한 검증)
- 입력값 검증 및 새니타이징 (XSS, SQL Injection, CSRF)
- 민감 정보 노출 (API 키, 시크릿, 환경변수 관리)
- CORS 및 CSP 설정
- 의존성 패키지의 알려진 취약점

### 3. 성능
- 불필요한 리렌더링 및 메모이제이션 누락
- 번들 사이즈 최적화 (tree-shaking, code splitting, lazy loading)
- 데이터베이스 쿼리 효율성 (N+1 문제, 인덱싱 누락, 불필요한 full scan)
- API 응답 시간에 영향을 주는 병목 지점
- 캐싱 전략의 적절성 (서버/클라이언트/CDN)
- 이미지 및 정적 자산 최적화

### 4. UI/UX
- 반응형 디자인 누락 또는 깨짐
- 접근성(a11y) 위반 (ARIA 속성, 키보드 네비게이션, 색상 대비)
- 로딩/에러/빈 상태 처리 누락
- 사용자 피드백 부재 (토스트, 스켈레톤, 프로그레스 표시)
- 일관성 없는 디자인 패턴 (간격, 폰트, 색상 시스템)
- 국제화(i18n) 관련 이슈 (하드코딩된 문자열, RTL 미지원 등)

### 5. 배포 & DevOps
- 환경별 설정 분리 (dev/staging/prod)
- CI/CD 파이프라인 누락 또는 미흡
- 환경변수 관리 방식의 안전성
- Docker 설정의 적절성 (멀티스테이지 빌드, 이미지 크기)
- 로깅 및 모니터링 체계
- 롤백 전략 존재 여부

### 6. 확장성 & 유지보수성
- 새로운 기능 추가 시 수정이 필요한 파일 범위 (변경 영향도)
- 하드코딩된 비즈니스 로직 (설정으로 분리 가능한 것들)
- 테스트 코드 존재 여부 및 커버리지
- API 버저닝 전략
- 데이터베이스 마이그레이션 관리
- 서드파티 의존성 관리 (버전 고정, 대체 가능성)

### 7. 프로덕션 안정성
- 에러 바운더리 및 폴백 UI
- Rate limiting 및 DDoS 방어
- 데이터 무결성 보장 (트랜잭션, 낙관적 업데이트 롤백)
- 동시성 처리 (동시 요청, 데이터 충돌)
- 메모리 누수 가능성
- 장애 복구 시나리오 (DB 다운, 외부 API 장애 시 동작)

---

## 출력 형식

아래 구조의 Markdown 파일로 작성해주세요:

### 파일 구조
1. **Executive Summary** (전체 건강도 점수 /100 + 핵심 발견 3-5개)
2. **심각도별 이슈 요약 테이블** (Critical/High/Medium/Low 개수)
3. **영역별 상세 분석** (위 7개 영역 각각)
4. **우선 조치 로드맵** (즉시/1주 내/1개월 내로 분류)

### 각 이슈의 기술 형식

| 항목 | 내용 |
|------|------|
| 심각도 | Critical / High / Medium / Low |
| 위치 | 파일 경로 + 라인 번호 (가능한 경우) |
| 현재 상태 | 문제가 되는 현재 코드 또는 상황 설명 |
| 문제점 | 왜 이것이 문제인지 구체적 설명 |
| 영향 범위 | 이 이슈가 영향을 미치는 범위 |
| 권장 수정안 | 구체적인 코드 예시 포함 수정 방법 |

---

## 분석 규칙

- 추측이 아닌 코드에서 **실제로 확인된 이슈**만 보고할 것
- 각 이슈에 반드시 **해당 파일 경로**를 명시할 것
- "~하면 좋습니다" 같은 모호한 제안이 아닌, **구체적 코드 예시가 포함된 수정안**을 제시할 것
- 현재 코드베이스 규모와 프로젝트 단계에 맞는 현실적인 권장사항을 제시할 것
  (MVP에 엔터프라이즈급 인프라를 권장하지 말 것)
- 분석 중 파일을 직접 실행하거나 수정하지 말 것 (읽기 전용 분석)
```

---

## 선택적 추가 지시 (필요한 것만 골라서 프롬프트에 추가)

```
## 추가 지시 옵션

### A. 특정 영역 집중 분석
> "위 7개 영역 중 [보안]과 [성능]을 특히 깊이 분석해주세요.
> 나머지 영역은 Critical/High 이슈만 보고해주세요."

### B. 비교 분석
> "현재 코드의 패턴을 [Next.js 공식 권장 패턴 / 업계 베스트 프랙티스]와
> 비교해서 차이점을 명시해주세요."

### C. 비용 영향 분석
> "각 이슈가 프로덕션에서 발생시킬 수 있는 예상 비용 영향
> (서버 비용 증가, 사용자 이탈, 보안 사고 등)도 함께 추정해주세요."

### D. 단계별 분석 (대규모 프로젝트용)
> "코드베이스가 크므로 다음 순서로 분석해주세요:
> 1단계: 전체 디렉토리 구조 파악 + 기술 스택 확인
> 2단계: 핵심 모듈(인증, DB, API) 심층 분석
> 3단계: UI 컴포넌트 분석
> 4단계: 설정 파일 및 배포 구성 분석
> 5단계: 종합 보고서 작성
> 각 단계 완료 후 중간 결과를 공유해주세요."

### E. 마이그레이션 관점 분석
> "향후 [React Native 전환 / 마이크로서비스 분리 / 모노레포 전환]을
> 고려하고 있으니, 현재 코드에서 이 전환을 어렵게 만드는 요소도 분석해주세요."
```

---

## 프롬프트 설계 원칙 (참고용)

|원칙|설명|
|---|---|
|**컨텍스트 제공**|프로젝트 단계와 스택을 알려줘야 현실적인 분석이 나옴|
|**구조화된 분석 영역**|영역을 명시하면 누락 없이 체계적으로 분석함|
|**심각도 체계**|이슈에 등급을 매기면 우선순위 판단이 가능해짐|
|**출력 형식 지정**|형식을 정해주면 일관된 결과물을 받을 수 있음|
|**네거티브 지시**|"하지 말 것"을 명시하면 불필요한 내용을 줄일 수 있음|
|**구체적 기대치**|"구체적 코드 예시 포함"처럼 기대 수준을 명시하면 품질이 올라감|
