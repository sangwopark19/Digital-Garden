## 1. 고가용성, 확장성, 탄력성
---
#### 1. **확장성 (Scalability)**

1. **정의**:
    
    - 시스템이 더 큰 부하를 처리할 수 있도록 **성능을 확장**하는 능력.
    - AWS 클라우드의 주요 장점 중 하나.
2. **확장성의 유형**:
    
    - **수직 확장성 (Vertical Scaling)**:
        - **인스턴스 크기**를 늘려 성능을 향상.
        - 예: t2.micro → t2.large.
        - **특징**:
            - 단일 노드 성능 향상.
            - 데이터베이스와 같은 분산이 어려운 시스템에서 자주 사용.
            - **한계**: 하드웨어 상한선 존재.
    - **수평 확장성 (Horizontal Scaling)**:
        - **인스턴스 수를 늘려** 부하를 분산.
        - 예: EC2 인스턴스 1대 → 6대.
        - **특징**:
            - 분산 시스템에서 주로 사용.
            - AWS의 **Auto Scaling Group** 및 **로드 밸런서**로 구현.

---

#### 2. **고가용성 (High Availability)**

1. **정의**:
    
    - 애플리케이션을 **여러 가용 영역(AZ)**에서 실행해 장애에 대비.
    - 데이터 센터 손실, 정전, 재난 등에도 **서비스 지속성 보장**.
2. **AWS에서의 구현**:
    
    - **Auto Scaling Group**:
        - 동일한 애플리케이션을 여러 AZ에서 실행.
    - **Elastic Load Balancer (ELB)**:
        - 트래픽을 다중 AZ의 인스턴스로 분산.

---

#### 3. **탄력성 (Elasticity)**

1. **정의**:
    
    - 시스템이 **수요 변화에 따라 자동으로 확장 및 축소**.
    - **자동 스케일링**:
        - 수요에 따라 EC2 인스턴스를 자동으로 스케일 업/다운, 스케일 아웃/인.
    - **비용 최적화**:
        - 사용량에 따른 비용 지불.
2. **AWS에서의 탄력성 구현**:
    
    - **Auto Scaling Group**:
        - 설정한 트리거(예: CPU 사용량)에 따라 인스턴스를 추가하거나 제거.
    - **Elastic Load Balancer**:
        - 탄력적으로 인스턴스에 트래픽 분산.

---

#### 4. **민첩성 (Agility)**

1. **정의**:
    
    - IT 리소스를 빠르게 배포하고 사용 가능.
    - 클릭 한 번으로 새 리소스를 활성화.
    - **AWS의 장점**:
        - 리소스 요청 및 사용 시간이 몇 주에서 몇 분으로 단축.
2. **확장성 및 탄력성과 차이**:
    
    - 민첩성은 **리소스 배포 속도**와 관련.
    - 확장성/탄력성은 **부하 처리 및 비용 최적화**에 중점.

---

#### 5. **AWS 주요 서비스**

1. **Elastic Load Balancer (ELB)**:
    
    - 트래픽을 여러 AZ 및 인스턴스에 분산.
    - 종류:
        - **Application Load Balancer (ALB)**: HTTP/HTTPS 트래픽에 최적화.
        - **Network Load Balancer (NLB)**: 고속 트래픽 처리.
        - **Gateway Load Balancer (GLB)**: 방화벽 및 네트워크 모니터링.
2. **Auto Scaling Group (ASG)**:
    
    - **자동 확장**:
        - 설정된 조건에 따라 인스턴스 수를 자동으로 조정.
    - **장점**:
        - 부하에 따른 유연한 확장/축소.
        - 고가용성 및 탄력성 보장.

---

#### 6. **시험 대비 포인트**

- **확장성 유형**:
    - 수직 확장: 인스턴스 크기 증가.
    - 수평 확장: 인스턴스 수 증가.
- **탄력성**:
    - 오토 스케일링을 통해 부하 변화에 자동 대응.
- **고가용성**:
    - 다중 AZ에서 애플리케이션 실행.
- **민첩성**:
    - 빠른 리소스 배포와 반복.

---

#### 7. **결론**

- AWS 클라우드는 **확장성, 고가용성, 탄력성, 민첩성**을 제공해 애플리케이션의 원활한 확장과 장애 복구를 지원.
- Auto Scaling Group과 ELB는 AWS에서 **확장성과 고가용성** 구현의 핵심 도구.

---
## 2.  Elastic Load Balancing (ELB) 개요
___
#### 1. **Elastic Load Balancer란?**

- **정의**:
    
    - **인터넷 트래픽을 다운스트림 EC2 인스턴스에 분산**하는 AWS 관리형 서비스.
    - 단일 액세스 지점(DNS 호스트 이름)을 제공.
    - 여러 EC2 인스턴스에 부하 분산을 통해 **확장성**과 **가용성**을 보장.
- **주요 기능**:
    
    - **트래픽 부하 분산**.
    - **상태 확인**:
        - 비정상적인 인스턴스에는 트래픽 전달 차단.
    - **HTTPS/SSL 종료**:
        - 로드 밸런서에서 SSL 인증서 관리.
    - **다중 AZ 배포**:
        - 애플리케이션 가용성 강화.

---

#### 2. **로드 밸런서 유형**

1. **Application Load Balancer (ALB)**:
    
    - **계층 7 (HTTP, HTTPS, gRPC 프로토콜)**.
    - **주요 특징**:
        - 정적 DNS 이름 제공.
        - **HTTP 라우팅 기능**:
            - 경로 기반, 호스트 기반 라우팅 지원.
            - 예: 특정 URL 요청을 특정 EC2 인스턴스로 라우팅.
    - **사용 사례**:
        - 웹 애플리케이션 및 API.
        - 정교한 HTTP/HTTPS 라우팅이 필요한 환경.
2. **Network Load Balancer (NLB)**:
    
    - **계층 4 (TCP 및 UDP 프로토콜)**.
    - **주요 특징**:
        - **정적 IP 제공**:
            - 탄력적 IP를 통해 고정된 IP 주소 사용 가능.
        - 초당 **수백만 요청 처리**.
    - **사용 사례**:
        - 고성능 네트워크 애플리케이션.
        - 저지연 및 대규모 트래픽 요구 환경.
3. **Gateway Load Balancer (GWLB)**:
    
    - **계층 3 (GENEVE 프로토콜)**.
    - **주요 특징**:
        - **트래픽 분석 및 보안**:
            - 방화벽, 침입 감지 시스템(IDS), 심층 패킷 검사(DPI) 지원.
        - 트래픽을 **가상 어플라이언스**로 분산 후 분석.
    - **사용 사례**:
        - 트래픽 검사 및 보안 어플라이언스 통합.
        - 네트워크 트래픽 관리 및 분석.
4. **Classic Load Balancer (CLB)**:
    
    - **2023년 폐기**.
    - 이전 세대 로드 밸런서로, ALB와 NLB로 대체.

---

#### 3. **로드 밸런서의 주요 차이점**

|**특징**|**Application Load Balancer (ALB)**|**Network Load Balancer (NLB)**|**Gateway Load Balancer (GWLB)**|
|---|---|---|---|
|**프로토콜**|HTTP, HTTPS, gRPC|TCP, UDP|IP 패킷, GENEVE|
|**계층**|7|4|3|
|**라우팅**|경로 기반, 호스트 기반 라우팅|정적 IP 제공|트래픽 분석 및 보안 어플라이언스|
|**사용 사례**|웹 애플리케이션, API|고성능 네트워크 애플리케이션|보안 및 트래픽 분석|
|**정적 주소**|정적 DNS 제공|정적 IP 제공|N/A|
|**주요 특징**|세분화된 HTTP 라우팅|대규모 요청 처리, 저지연|방화벽, 침입 탐지, 패킷 검사|

---

#### 4. **시험 대비 포인트**

- **ALB**:
    - 계층 7, HTTP/HTTPS 라우팅, 정적 DNS 제공.
- **NLB**:
    - 계층 4, 고성능 트래픽 처리, 정적 IP 제공.
- **GWLB**:
    - 계층 3, 보안 어플라이언스 통합 및 트래픽 분석.
- **CLB**:
    - 2023년 폐기.

---

#### 5. **Elastic Load Balancer의 장점**

1. **AWS 관리형 서비스**:
    - 유지보수, 업그레이드, 고가용성을 AWS가 책임.
2. **확장성과 가용성**:
    - 다중 AZ 배포로 장애 복구 지원.
3. **비용 최적화**:
    - 사용량에 따른 요금 지불.

---

#### 6. **결론**

- Elastic Load Balancer는 AWS에서 **확장성**, **고가용성**, **보안**을 제공하는 핵심 서비스.
- 각 로드 밸런서 유형(ALB, NLB, GWLB)의 특징과 사용 사례를 이해하고 시험 대비 필요.

___
## 3. 애플리케이션 로드 밸런서 (ALB) 실습
---
### **1. 목표**

- **두 개의 EC2 인스턴스를 실행**하여 웹 애플리케이션 환경 구축.
- **Application Load Balancer (ALB)를 생성**하여 부하 분산 실습.
- **EC2 인스턴스가 자동으로 트래픽을 나누어 처리하는 것 확인**.
- **상태 확인(Health Check) 및 대상 그룹(Target Group) 관리 실습**.

---

### **2. EC2 인스턴스 실행**

1. **EC2 인스턴스 2개 실행**:
    - 이름: `My First Instance`, `My Second Instance`.
    - 운영체제: **Amazon Linux 2**.
    - 인스턴스 유형: `t2.micro`.
    - 보안 그룹: 기존 `launch-wizard-1` 사용 (HTTP 및 SSH 허용).
    - 사용자 데이터(User Data) 입력하여 웹 서버 자동 실행:
        
        ```bash
        #!/bin/bash
        yum update -y
        yum install -y httpd
        systemctl start httpd
        systemctl enable httpd
        echo "Hello World from $(hostname -f)" > /var/www/html/index.html
        ```
        
    - 인스턴스 실행 후 **각 인스턴스의 퍼블릭 IPv4 주소 확인**:
        - 브라우저에서 `http://<IPv4 주소>` 입력 → **"Hello World from <인스턴스 이름>"** 확인.

---

### **3. Application Load Balancer (ALB) 생성**

2. **EC2 콘솔에서 "로드 밸런서 생성" 선택**.
3. **로드 밸런서 유형 선택**:
    - `Application Load Balancer (ALB)`.
4. **기본 설정**:
    - 이름: `DemoALB`.
    - 스키마: `인터넷 연결 (Internet-facing)`.
    - 주소 유형: `IPv4`.
5. **네트워크 매핑**:
    - 가용 영역(AZ) 전체 선택.
6. **보안 그룹 설정**:
    - 새 보안 그룹 `demo-sg-load-balancer` 생성.
    - **HTTP(80) 트래픽 허용** (모든 위치 `0.0.0.0/0`).
7. **리스너 및 라우팅 설정**:
    - **포트 80 (HTTP)에서 대상 그룹(Target Group)으로 트래픽 라우팅**.

---

### **4. 대상 그룹 (Target Group) 생성**

8. **대상 그룹 유형 선택**:
    - 유형: `인스턴스`.
    - 이름: `demo-tg-alb`.
    - 프로토콜: `HTTP`, 포트: `80`.
    - 상태 확인(Health Check) 설정:
        - 프로토콜: `HTTP`
        - 경로: `/`
9. **EC2 인스턴스 등록**:
    - `My First Instance`와 `My Second Instance` 선택 후 포트 `80`으로 등록.

---

### **5. 로드 밸런서 테스트**

10. **ALB 생성 후 활성화 상태 확인** (`Provisioning` → `Active`).
11. **ALB의 DNS 이름 복사하여 브라우저에서 실행**:
    - `http://<ALB_DNS_Name>` 입력.
    - 새로 고침(F5)하면 **두 개의 EC2 인스턴스에서 번갈아 응답**.
    - 예시:
        
        ```
        Hello World from ip-172-31-xx-xx.ec2.internal
        Hello World from ip-172-31-yy-yy.ec2.internal
        ```
        
    - **로드 밸런싱 정상 작동 확인**.

---

### **6. 인스턴스 상태 확인 및 트래픽 처리**

12. **EC2 중지 후 대상 그룹 상태 확인**:
    - `My First Instance` 중지 후 **대상 그룹 상태가 "unused"로 변경됨**.
    - ALB에서 새로 고침 → `My Second Instance`만 응답.
13. **중지한 인스턴스 재시작**:
    - 대상 그룹에서 상태가 `"initial"` → `"healthy"`로 변경됨.
    - ALB에서 새로 고침 → 다시 두 개의 인스턴스가 로드 밸런싱됨.

---

### **7. 실습 결과**

✅ **로드 밸런서가 트래픽을 두 개의 EC2 인스턴스에 자동으로 분배**  
✅ **하나의 인스턴스가 중지되면, 로드 밸런서는 자동으로 다른 인스턴스로 트래픽을 전송**  
✅ **재시작 후 자동으로 다시 정상 복구**

---

### **8. 시험 대비 포인트**

- **Application Load Balancer (ALB)**:
    - **계층 7(HTTP/HTTPS) 전용**.
    - 경로 기반, 호스트 기반 라우팅 지원.
    - 상태 확인을 통해 **비정상 인스턴스 자동 제외**.
- **Target Group**:
    - **ALB와 EC2 간 연결 담당**.
    - 인스턴스 상태(Healthy/Unhealthy) 자동 관리.
- **ALB의 DNS를 통해 단일 엔드포인트 제공**.

---

### **9. 실습 정리**

✔ **EC2 인스턴스 2개 생성 및 웹 서버 배포**  
✔ **Application Load Balancer 생성 및 설정**  
✔ **대상 그룹(Target Group) 설정 및 EC2 연결**  
✔ **로드 밸런싱 확인 및 인스턴스 상태 변화 테스트**

---
## 4. Auto Scaling 그룹 (ASG) 개요
---
### **1. 오토 스케일링 그룹(ASG) 개요**

- **오토 스케일링 그룹(ASG)**는 **자동으로 EC2 인스턴스를 추가하거나 제거하여 부하 변화에 대응**하는 AWS 서비스.
- **로드 밸런서(ALB)와 함께 사용하면** 동적으로 인스턴스를 생성하고 제거하며, 트래픽을 자동으로 분산.

---

### **2. 오토 스케일링 그룹의 주요 기능**

1. **자동 확장(Scaling)**
    
    - **스케일 아웃(Scale Out)**: 웹 트래픽 증가 시 **EC2 인스턴스 추가**.
    - **스케일 인(Scale In)**: 트래픽 감소 시 **EC2 인스턴스 제거**.
2. **고가용성 및 안정성 유지**
    
    - 인스턴스 장애 시 **자동 감지 후 새 인스턴스 생성**.
    - 로드 밸런서와 연동하여 **비정상 인스턴스를 제거하고 정상 인스턴스로 대체**.
3. **비용 최적화**
    
    - 사용량에 따라 자동으로 인스턴스 수 조정 → **불필요한 비용 절감**.

---

### **3. 오토 스케일링 그룹의 기본 설정**

4. **최소 크기 (Min Size)**:
    
    - 실행할 **최소 인스턴스 수** (예: 최소 1개 유지).
5. **희망 용량 (Desired Capacity)**:
    
    - 정상적인 운영을 위해 유지할 **기본 인스턴스 수** (예: 기본 2개 운영).
6. **최대 크기 (Max Size)**:
    
    - 트래픽이 급증할 경우 **최대 확장 가능한 인스턴스 수** (예: 최대 5개까지 확장).
7. **자동 확장 정책 (Scaling Policies)**
    
    - **CPU 사용률, 네트워크 트래픽 등 특정 조건에 따라 자동 확장**.

---

### **4. 오토 스케일링 그룹과 로드 밸런서의 관계**

- **로드 밸런서(ALB)**가 **트래픽을 자동으로 분산**.
- 오토 스케일링 그룹이 **EC2 인스턴스를 추가하면, 로드 밸런서가 새로운 인스턴스를 자동으로 등록**.
- 인스턴스가 비정상 상태(Unhealthy)일 경우 **로드 밸런서가 자동으로 제거**.

---

### **5. 오토 스케일링 그룹 작동 원리**

8. **기본 상태**
    
    - 초기에는 EC2 인스턴스 1개만 실행 중.
    - 로드 밸런서(ALB)가 트래픽을 해당 인스턴스로 보냄.
9. **트래픽 증가 → 스케일 아웃 (Scale Out)**
    
    - 사용자가 많아져 트래픽이 증가하면 **ASG가 새로운 EC2 인스턴스 생성**.
    - 로드 밸런서가 자동으로 새로운 인스턴스를 등록하고 트래픽을 분산.
10. **트래픽 감소 → 스케일 인 (Scale In)**
    
    - 밤이 되거나 사용자가 줄어들면 **불필요한 EC2 인스턴스를 종료**.
    - 로드 밸런서는 자동으로 종료된 인스턴스를 목록에서 제거.
11. **비정상 인스턴스 감지 및 교체**
    
    - 장애 발생 시 **ASG가 감지하고 자동으로 대체 인스턴스 생성**.
    - 로드 밸런서가 정상 인스턴스로 트래픽 전송.

---

### **6. 시험 대비 포인트**

✅ **오토 스케일링 그룹의 목적**

- 트래픽 변화에 따라 EC2 인스턴스 자동 확장 및 축소.
- **고가용성과 비용 최적화를 동시에 실현**.  
    ✅ **로드 밸런서와의 연동**
- ALB가 트래픽을 자동으로 분산하며, ASG는 필요한 인스턴스를 동적으로 관리.  
    ✅ **자동 확장 정책(Scaling Policy)**
- 트래픽 증가 시 EC2 인스턴스 추가(스케일 아웃).
- 트래픽 감소 시 EC2 인스턴스 제거(스케일 인).  
    ✅ **비정상 인스턴스 자동 감지 및 교체**
- 장애가 발생한 인스턴스를 감지하여 새로운 정상 인스턴스로 자동 교체.

---
## 5. Auto Scaling Group 생성 과정
---
### 🎯 **개요**

- **Auto Scaling Group (ASG)**는 EC2 인스턴스를 자동으로 생성, 삭제하여 애플리케이션의 가용성과 성능을 유지합니다.
- ASG는 로드 밸런서와 연계해 트래픽을 균등하게 분배하고, 비정상 인스턴스를 자동으로 교체합니다.

---

### 🚀 **사전 작업**

1. **기존 인스턴스 종료**
    - 두 개의 인스턴스를 선택하여 종료해야 ASG 생성 가능.

---

### 📌 **Auto Scaling Group 생성 절차**

2. **ASG 생성 시작**
    
    - 콘솔 우측 하단 → **Auto Scaling Group** 클릭 → **ASG 생성**
3. **이름 설정**
    
    - `DemoASG`로 설정
4. **시작 템플릿 생성**
    
    - 이름: `DemoLaunchTemplate`
    - 역할: EC2 인스턴스 생성 방법을 정의 (ASG가 내부적으로 참조)
5. **시작 템플릿 세부 설정**
    
    - **이미지:** `Amazon Linux 2`
    - **인스턴스 유형:** `t2.micro`
    - **키 쌍:** 포함하지 않음
    - **서브넷:** 포함하지 않음
    - **보안 그룹:** `launch-wizard-1` 선택
    - **고급 설정:** 사용자 데이터 포함
6. **사용자 데이터 입력**
    
    - 사용자 데이터를 아래에 붙여 넣기
        
        ```bash
        #!/bin/bash
        echo "Hello World" > /var/www/html/index.html
        ```
        
    - 시작 템플릿 생성 완료

---

### 🌐 **배포 설정**

7. **서브넷 및 가용 영역 선택**
    
    - VPC 및 여러 가용 영역 선택 (3개 모두 선택)
8. **로드 밸런서 연결**
    
    - **Application Load Balancer(ALB)**에 연결
    - **Demo 대상 그룹(demo-tg-alb)** 내에 모든 인스턴스가 자동 등록됨
    - **상태 확인:** EC2 + ELB

---

### 📊 **스케일링 및 용량 설정**

9. **스케일링 설정**
    
    - **희망 용량:** 2 (기본 유지 인스턴스 수)
    - **최소 용량:** 1
    - **최대 용량:** 4
    - **스케일링 정책:** 기본 설정 (필요 시 수요에 따라 자동 조정)
10. **알림 및 태그 설정**
    
    - 알림, 태그: 설정하지 않음

---

### 📈 **Auto Scaling Group 동작 확인**

11. **초기 상태 확인**
    
    - 상태: `Updating capacity` (초기 인스턴스 생성 중)
    - **활동 기록:** 두 개의 EC2 인스턴스 생성 기록 확인
    - **EC2 콘솔:** `Pending` 상태 확인 → `Running` 상태 전환
12. **대상 그룹 상태 확인**
    
    - `demo-tg-alb` 대상 그룹에 두 인스턴스 자동 등록
    - 상태: `unhealthy` → `healthy` (완전한 시작 후 전환)

---

### ⚙️ **상태 확인 최적화**

13. **상태 확인 설정 변경**
    - **대상 그룹 → 상태 확인 설정 편집**
        - **정상 임계값:** 2
        - **간격:** 5초
        - **제한 시간:** 2초
    - 변경 후 상태 확인 속도 향상 → 빠르게 `healthy` 상태 전환

---

### 🔄 **Auto Scaling Group 자동 복구 시나리오**

14. **인스턴스 종료 시 동작 확인**
    
    - 인스턴스 1개 종료 → ASG가 자동 감지
    - **활동 기록:** "비정상 인스턴스 대체" 이벤트 확인
    - 새 인스턴스 자동 생성 및 대상 그룹 등록
15. **결과 및 특징**
    
    - 서비스 중단 없이 새 인스턴스가 추가되어 트래픽 유지
    - ASG의 자가 복구(Self-healing) 기능 확인

---

### 🔧 **추가 설정 및 관리**

16. **Auto Scaling Group 수정**
    
    - **희망 용량 조정**
        - **1**: 인스턴스 종료 및 하나로 유지
        - **4**: 네 개의 인스턴스 생성 및 로드 밸런서 연결  
            → 트래픽이 네 개의 인스턴스 간에 분산됨
17. **스케일링 정책 활용 (심화 내용)**
    
    - 부하나 시간대별 트래픽에 따라 인스턴스 수를 자동 조정
    - 수요가 많으면 인스턴스 추가, 적으면 축소

---

### ✅ **정리 및 특징 요약**

- **Auto Scaling Group의 핵심 기능**
    - 🎯 **자동 스케일링**: 수요에 따른 인스턴스 수 자동 조정
    - 🔄 **자가 복구(Self-healing)**: 비정상 인스턴스 자동 대체
    - ⚖️ **로드 밸런싱**: ALB와 연계하여 트래픽 분산
    - 🔍 **상태 확인 및 관리**: EC2 및 ELB 상태 체크로 서비스 안정성 보장

---

### 💡 **팁 및 트러블슈팅**

- **상태가 `unhealthy`에서 `healthy`로 전환되지 않는 경우:**
    - 대상 그룹 상태 확인 설정 확인 (간격, 제한 시간, 임계값)
    - 인스턴스 보안 그룹 설정 확인 (로드 밸런서와의 통신 허용)
    - 사용자 데이터 스크립트 오류 확인

---

### 🚀 **다음 단계 및 심화 학습**

- **자동 스케일링 정책 심화 학습**: CPU 사용률, 네트워크 트래픽에 따른 동적 스케일링
- **CloudWatch 연계**: 모니터링 및 알림 설정
- **비용 최적화**: 스팟 인스턴스 및 예약 인스턴스 활용

---

이렇게 정리한 내용을 Obsidian에 그대로 복사해도 깔끔하게 보일 거예요!  
필요한 부분 수정이나 추가 설명이 필요하면 알려줘요! 😊