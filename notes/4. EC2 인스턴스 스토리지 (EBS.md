##  EC2 인스턴스 스토리지 전체 요약
---
#### 1. **EBS (Elastic Block Store)**

- **특징**:
    - **네트워크 드라이브**로 EC2 인스턴스 한 개에만 연결 가능.
    - 특정 AZ에 매핑되며, 다른 AZ로 데이터 전송 시 **스냅샷** 사용.
- **스냅샷**:
    - 데이터 백업 및 복구.
    - 다른 AZ로 복사 가능.
- **사용 사례**:
    - 단일 인스턴스의 데이터 저장 및 지속성 보장.

---

#### 2. **AMI (Amazon Machine Image)**

- **특징**:
    - EC2 인스턴스의 **사용자 지정 템플릿**.
    - 사전 구성된 OS, 애플리케이션, 설정 포함.
- **EC2 이미지 빌더**:
    - AMI 생성, 테스트, 배포를 자동화.

---

#### 3. **EC2 인스턴스 스토어**

- **특징**:
    - EC2 인스턴스와 연결된 **고성능 하드웨어 스토리지**.
    - 데이터는 **인스턴스 중지/종료 시 손실**.
- **사용 사례**:
    - 임시 데이터, 캐시, 고속 I/O 워크로드.

---

#### 4. **EFS (Elastic File System)**

- **특징**:
    - **네트워크 파일 시스템 (NFS)**으로, 수백 개의 EC2 인스턴스에 동시에 연결 가능.
    - 리전 내 모든 가용 영역에서 사용 가능.
    - **확장 가능**하며, 사용량 기반 요금제.
- **EFS-IA (Infrequent Access)**:
    - 자주 사용하지 않는 데이터를 저비용 티어로 이동.
    - 자동화된 **수명 주기 관리** 제공.
- **사용 사례**:
    - 다중 인스턴스 간 파일 공유, 고가용성.

---

#### 5. **FSx (Amazon FSx)**

- **FSx for Windows File Server**:
    - Windows 기반 **SMB/NTFS 파일 공유**.
    - Microsoft Active Directory와 통합.
    - 온프레미스 및 AWS 리소스에서 액세스 가능.
- **FSx for Lustre**:
    - **고성능 컴퓨팅 (HPC)** 용도로 설계.
    - 머신 러닝, 데이터 분석, 비디오 처리 등 고성능 요구 사항에 적합.
    - **Amazon S3와 통합**하여 데이터 저장.

---

#### 6. **시험 대비 포인트**

- **EBS와 EFS 비교**:
    - EBS: 단일 EC2 연결, 데이터 지속성.
    - EFS: 다중 인스턴스 연결, 네트워크 파일 공유.
- **스토리지 최적화**:
    - EFS-IA를 사용해 자주 사용하지 않는 파일 비용 절감.
- **FSx 활용**:
    - Windows 파일 공유 (FSx for Windows).
    - HPC 스토리지 (FSx for Lustre).

---

#### 7. **결론**

- EC2 스토리지 유형은 **워크로드의 요구사항**에 따라 선택해야 함.
- AMI와 EC2 이미지 빌더를 통해 환경 설정 자동화 가능.
- EFS 및 FSx를 활용해 **네트워크 파일 공유와 고성능 요구**를 충족.


## 1. EBS 개요
---
#### 1. **EBS (Elastic Block Store) 개요**

- **EBS 볼륨**:
    - EC2 인스턴스에 연결 가능한 **네트워크 기반 스토리지**.
    - 인스턴스 종료 후에도 데이터 유지 가능 (**데이터 지속성**).
    - 네트워크를 통해 연결되므로 **지연 발생 가능**.
    - **무료 등급**: 매달 30GB의 범용 SSD 또는 마그네틱 유형 제공.

---

#### 2. **EBS 볼륨 특징**

- **단일 연결 제한**:
    - **CCP 레벨**: 하나의 EBS 볼륨은 한 번에 하나의 EC2 인스턴스에만 연결 가능.
    - **어소시에이트 레벨**: 일부 EBS 볼륨은 다중 연결 가능. (EBS Multi-Attach)
- **가용 영역 제한**:
    - EBS 볼륨은 특정 가용 영역(AZ) 내에서만 사용 가능.
    - 스냅샷을 이용해 다른 AZ로 복사 가능.
- **용량 및 성능 설정**:
    - 생성 시 용량(GB) 및 **IOPS**(초당 전송 작업 수)를 설정.
    - 필요 시 용량 및 성능 확장 가능.

---

#### 3. **EBS 볼륨 연결 및 관리**

- **인스턴스와 연결**:
    - 하나의 EC2 인스턴스에 여러 EBS 볼륨 연결 가능.
    - EBS 볼륨은 인스턴스와 분리 후 다른 인스턴스에 연결 가능.
- **독립 실행 가능**:
    - EBS 볼륨은 인스턴스에 연결하지 않고도 존재할 수 있음.
    - 필요 시 연결해 사용.

---

#### 4. **EBS 스냅샷**

- **스냅샷 생성**:
    - EBS 볼륨의 백업을 생성해 다른 AZ 또는 리전에 복사 가능.
    - 데이터 복구 및 볼륨 복제에 유용.

---

#### 5. **종료 시 삭제 옵션**

- **루트 볼륨과 데이터 볼륨의 기본 설정**:
    - 루트 EBS 볼륨:
        - 기본적으로 **종료 시 삭제 활성화**.
        - 인스턴스 종료 시 자동 삭제.
    - 추가 데이터 볼륨:
        - 기본적으로 **종료 시 삭제 비활성화**.
        - 인스턴스 종료 후에도 유지.
- **설정 변경 가능**:
    - 인스턴스 생성 시 UI에서 종료 시 삭제 옵션 활성화/비활성화 가능.
- **사용 예시**:
    - 데이터 보존을 위해 루트 볼륨의 종료 시 삭제 비활성화.

---

#### 6. **EBS 볼륨의 활용**

- **네트워크 기반 USB 스틱**으로 간주:
    - 인스턴스 간 빠른 연결 전환 가능.
    - 대체 작동 및 백업에 유용.
- **특정 AZ 내에서만 사용**:
    - 다른 AZ에서 사용하려면 스냅샷을 통해 복제.

---

#### 7. **시험 대비 포인트**

- **EBS 볼륨 특성**:
    - 데이터 지속성, 네트워크 연결, 단일/다중 연결 제한.
- **가용 영역 제한**:
    - 동일 AZ 내에서만 사용 가능.
- **종료 시 삭제 옵션**:
    - 기본 설정과 활성화/비활성화 방식.
- **스냅샷 활용**:
    - 볼륨 복사 및 데이터 복구.

---

#### 8. **결론**

- EBS는 EC2 인스턴스의 주요 스토리지 옵션으로 **데이터 지속성**, **유연성**, **확장성**을 제공.
- 스냅샷과 종료 시 삭제 옵션을 활용해 데이터 관리와 비용 최적화 가능.

---

## 2. EBS 실습
---
#### 1. **EC2 인스턴스의 스토리지 확인**

- **Storage 탭**:
    - 연결된 **루트 장치**와 **블록 장치** 확인 가능.
    - 기본적으로 **8GiB 루트 볼륨**이 연결되어 있음.

---

#### 2. **EBS 볼륨 생성 및 연결**

1. **볼륨 생성**:
    - **Create volume** 클릭.
    - **유형**: 예) gp2.
    - **크기**: 원하는 크기 (예: 2GiB).
    - **가용 영역(AZ)**: EC2 인스턴스와 동일한 AZ로 설정 필요.
2. **볼륨 연결**:
    - 생성 후 상태가 **Available**로 표시되면 연결 가능.
    - **Actions → Attach volume**에서 인스턴스 선택 후 연결.
3. **여러 볼륨 연결**:
    - 하나의 EC2 인스턴스에 여러 EBS 볼륨 연결 가능.
    - 예: 8GiB 루트 볼륨 + 2GiB 추가 볼륨.

---

#### 3. **가용 영역(AZ) 제한**

- **EBS 볼륨은 특정 AZ 내에서만 연결 가능**:
    - 볼륨이 **eu-west-1b**에 생성되었으면 해당 AZ의 인스턴스에만 연결 가능.
    - 다른 AZ로 연결하려면 스냅샷을 생성 후 복사해야 함.
- 다른 AZ에서 볼륨 생성 시 연결 불가 메시지 표시.

---

#### 4. **Delete on Termination 속성**

1. **기본 설정**:
    - **루트 볼륨**: Delete on Termination 기본값이 'Yes'.
    - **추가 볼륨**: Delete on Termination 기본값이 'No'.
2. **설정 변경**:
    - EC2 인스턴스 생성 시 **Storage 설정에서 변경 가능**.
    - 루트 볼륨 삭제 방지: 'No'로 설정.
3. **종료 시 동작**:
    - 인스턴스 종료 시:
        - 루트 볼륨은 기본적으로 삭제.
        - 추가 볼륨은 인스턴스에서 분리되고 삭제되지 않음.

---

#### 5. **EBS 볼륨 관리**

- **볼륨 삭제**:
    - **Actions → Delete volume**으로 불필요한 볼륨 삭제 가능.
    - 클라우드의 장점: 필요에 따라 빠르게 생성 및 삭제 가능.
- **인스턴스 종료 후 상태**:
    - 추가 볼륨은 **Available** 상태로 남음.
    - 루트 볼륨은 삭제되거나 남은 설정에 따라 동작.

---

#### 6. **실습 예시**

- **8GiB 루트 볼륨** + **2GiB 추가 볼륨** 연결 후 인스턴스 종료:
    - 루트 볼륨: 삭제됨 (Delete on Termination 설정 'Yes').
    - 추가 볼륨: 남아 있음 (Delete on Termination 설정 'No').

---

#### 7. **시험 대비 포인트**

- **EBS 볼륨의 AZ 제한**: 동일 AZ 내에서만 연결 가능.
- **Delete on Termination 설정**:
    - 루트 볼륨의 기본값과 설정 변경 방법.
- **볼륨 생성 및 연결 프로세스**:
    - Create volume → Attach volume → EC2 인스턴스 연결.

---

#### 8. **결론**

- EBS 볼륨은 EC2 인스턴스의 유연한 스토리지 옵션으로, AZ와 설정 제한 사항을 이해하고 활용해야 함.
- Delete on Termination 속성을 통해 데이터 유지 및 삭제 동작을 제어 가능.
- 클라우드 환경의 장점인 빠른 생성/삭제를 활용해 효율적인 스토리지 관리 가능.

## 3. EBS 스냅샷 개요
---

#### 1. **EBS 스냅샷 개요**

- **스냅샷**:
    - EBS 볼륨의 특정 시점에 대한 **백업**.
    - EBS 볼륨이 삭제되더라도 복구 가능.
- **백업 생성 방법**:
    - EBS 볼륨 연결 상태에서도 스냅샷 생성 가능.
    - 데이터를 정리한 뒤 스냅샷을 생성하는 것이 권장됨.

---

#### 2. **EBS 스냅샷의 주요 활용**

1. **데이터 복구**:
    - 삭제된 EBS 볼륨 복구에 사용.
2. **가용 영역 및 리전 간 복제**:
    - 한 가용 영역(AZ)의 EBS 볼륨 데이터를 다른 AZ 또는 리전으로 전송 가능.
    - 복제 프로세스:
        1. EBS 볼륨의 스냅샷 생성.
        2. 스냅샷을 기반으로 새 EBS 볼륨 생성.
        3. 새 EBS 볼륨을 다른 AZ 또는 리전의 EC2 인스턴스에 연결.

---

#### 3. **EBS 스냅샷 아카이브**

- **특징**:
    - 스냅샷을 저비용 **아카이브 티어**로 이동.
    - 비용 절감: 기본 스냅샷 대비 75% 저렴.
- **단점**:
    - 복구 시간: 24~72시간 소요.
    - 긴급 복구가 필요하지 않은 스냅샷에 적합.
- **활용 사례**:
    - 자주 액세스하지 않는 장기 보관 스냅샷.

---

#### 4. **EBS 스냅샷 휴지통**

- **특징**:
    - 스냅샷 삭제 시 복구 가능한 보호 기능.
    - 삭제된 스냅샷은 설정된 기간 동안 휴지통에 보관.
- **보관 기간 설정**:
    - 최소 1일, 최대 1년.
- **활용 사례**:
    - 실수로 스냅샷을 삭제한 경우 복구 가능.

---

#### 5. **EBS 스냅샷 활용 사례**

1. **백업 및 복구**:
    - EC2 인스턴스와 데이터를 안정적으로 복원.
2. **리전 간 데이터 이동**:
    - 글로벌 인프라 활용 및 장애 대비.
3. **비용 절감**:
    - 아카이브 티어로 비용 최적화.
4. **데이터 보호**:
    - 휴지통 설정으로 스냅샷 삭제 복구.

---

#### 6. **시험 대비 포인트**

- **스냅샷의 특성**:
    - 백업, 복구, 복제 기능.
- **아카이브 티어**:
    - 비용 절감 효과와 복구 시간.
- **휴지통 설정**:
    - 복구 가능 기간 설정.
- **스냅샷 활용 프로세스**:
    - 생성 → 복제 → 복구.

---

#### 7. **결론**

- **EBS 스냅샷**은 데이터 보호와 복제, 비용 절감을 위한 강력한 도구.
- **아카이브 티어**와 **휴지통** 기능을 활용해 스냅샷 관리 최적화.
- 글로벌 인프라를 활용한 리전 간 데이터 이동 및 복구 계획에 중요한 역할.

---

## 4. EBS 스냅샷 실습
---

#### 1. **스냅샷 생성**

- **스냅샷 생성 방법**:
    1. EBS 볼륨에서 **Actions → Create Snapshot** 선택.
    2. 설명 추가 (예: `DemoSnapshot`) 후 **Create Snapshot** 클릭.
- **스냅샷 확인**:
    - **Snapshots** 메뉴에서 생성된 스냅샷 확인 가능.
    - 100% 완료되면 사용 가능.

---

#### 2. **스냅샷 활용**

1. **리전 간 스냅샷 복사**:
    - **Actions → Copy Snapshot** 선택.
    - 목적지 리전을 설정해 복사.
    - **활용 사례**:
        - 재해 복구 전략 (백업 데이터 리전을 다르게 설정).
2. **스냅샷에서 볼륨 재생성**:
    - **Actions → Create Volume from Snapshot** 선택.
    - 볼륨 크기, 유형, AZ 설정 가능 (예: `eu-west-1b`).
    - 스냅샷을 기반으로 새 EBS 볼륨 복원.

---

#### 3. **Recycle Bin (휴지통) 활용**

- **휴지통 설정**:
    1. **Recycle Bin → Create Retention Rule** 클릭.
    2. 이름 설정 (예: `DemoRetentionRule`).
    3. 리소스 유형: EBS 스냅샷.
    4. 보존 기간: 1일~1년 설정 (예: 1일).
    5. 규칙 잠금 상태: `Unlocked`로 유지 (원할 때 규칙 삭제 가능).
    6. **Create Rule** 클릭.
- **삭제된 스냅샷 복원**:
    - **Recycle Bin**에서 삭제된 스냅샷 확인 및 복원 가능.
    - **Actions → Restore Resource** 클릭 후 스냅샷 복구.

---

#### 4. **스토리지 티어 변경**

- **스탠더드 티어**:
    - 기본 스토리지 티어.
- **아카이브 티어**:
    - 비용 75% 절감.
    - **복원 시간**: 24~72시간 소요.
    - 급히 복구할 필요가 없는 스냅샷에 적합.
- **티어 변경 방법**:
    - **Actions → Modify Tier**에서 티어 변경 가능.

---

#### 5. **스냅샷 삭제 및 복구**

1. **스냅샷 삭제**:
    - **Actions → Delete Snapshot** 클릭.
    - 삭제된 스냅샷은 기본적으로 Recycle Bin으로 이동.
2. **스냅샷 복구**:
    - **Recycle Bin**에서 삭제된 스냅샷 확인.
    - **Actions → Restore Resource** 클릭.
    - 복구된 스냅샷은 다시 EC2 콘솔의 스냅샷 목록에 표시.

---

#### 6. **시험 대비 포인트**

- **스냅샷 활용**:
    - 리전 간 복사, 볼륨 재생성.
- **Recycle Bin**:
    - 삭제된 스냅샷 복구 및 보존 규칙 설정.
- **스토리지 티어**:
    - 스탠더드와 아카이브 티어의 차이와 활용 방법.

---

#### 7. **결론**

- EBS 스냅샷은 **백업, 복구, 복제**의 필수 도구.
- **Recycle Bin**으로 실수로 삭제된 스냅샷 복구 가능.
- **아카이브 티어**를 활용해 비용 효율성을 극대화.
- 실습을 통해 스냅샷 관리와 활용 능력을 강화.
---

## 5. AMI 개요
---
#### 1. **AMI란?**

- **Amazon Machine Image**의 약자로, EC2 인스턴스의 기반이 되는 템플릿.
- **소프트웨어 구성 포함**:
    - 운영 체제(OS).
    - 애플리케이션, 유틸리티, 모니터링 도구 등.
- **사전 패키징**된 환경 제공:
    - 부팅 및 구성 시간을 단축.
    - 동일한 환경의 EC2 인스턴스를 쉽게 복제 가능.

---

#### 2. **AMI의 주요 유형**

1. **AWS 제공 공용 AMI**:
    - AWS에서 기본 제공.
    - 예: **Amazon Linux 2 AMI**.
2. **사용자 지정 AMI**:
    - 사용자가 직접 생성한 AMI.
    - 특정 리전에 맞게 구축 가능.
    - AWS 글로벌 인프라에 복사해 다중 리전 활용 가능.
3. **AWS 마켓플레이스 AMI**:
    - 타사 또는 공급 업체가 제공하는 AMI.
    - 특정 소프트웨어가 사전 구성된 상태로 제공.
    - 사용자는 시간 절약을 위해 구매 가능.
    - AMI를 만들어 판매할 수도 있음.

---

#### 3. **사용자 지정 AMI 생성 및 활용**

1. **사용자 지정 AMI 생성**:
    - EC2 인스턴스 생성 후 **사용자 지정 구성**.
    - 인스턴스를 중지하여 **데이터 무결성** 확보.
    - AMI 생성:
        - 생성 과정에서 EBS 스냅샷 자동 생성.
2. **AMI 복제 및 사용**:
    - 특정 리전의 AMI를 다른 리전으로 복사.
    - 생성된 AMI로 여러 인스턴스를 실행 가능.
    - 예:
        - US-EAST-1A에서 사용자 지정 AMI 생성.
        - 해당 AMI를 사용해 US-EAST-1B에서 인스턴스 실행.

---

#### 4. **AMI의 활용 사례**

- **환경 표준화**:
    - 동일한 소프트웨어 및 설정이 적용된 EC2 인스턴스 실행.
- **운영 효율성**:
    - 여러 리전 및 AZ에서 동일한 환경 복제.
- **시간 절약**:
    - AWS 마켓플레이스 AMI 활용으로 소프트웨어 설치 및 구성 시간 단축.
- **유지보수**:
    - 사용자 지정 AMI를 업데이트 및 관리하여 재사용.

---

#### 5. **시험 대비 포인트**

- **AMI의 정의와 구성 요소**:
    - OS, 애플리케이션, 설정 포함.
- **AMI 유형**:
    - AWS 공용 AMI, 사용자 지정 AMI, 마켓플레이스 AMI.
- **사용자 지정 AMI 생성 및 활용 프로세스**:
    - 인스턴스 생성 → 사용자 지정 → 중지 → AMI 생성 → 다른 리전/인스턴스에 활용.

---

#### 6. **결론**

- AMI는 EC2 인스턴스의 **표준 템플릿**으로, 환경 표준화 및 복제를 쉽게 지원.
- 사용자 지정 AMI와 AWS 마켓플레이스를 활용해 **운영 효율성**과 **유연성**을 극대화.
- 다음 강의에서는 AMI 생성 및 활용을 실제 데모로 확인 예정.

## 6. AMI 실습
---

#### 1. **AMI란?**

- **Amazon Machine Image (AMI)**:
    - EC2 인스턴스의 템플릿으로, 소프트웨어와 설정이 사전 구성된 상태.
    - 부팅 시간을 단축하고, 반복 작업을 최소화.

---

#### 2. **AMI 생성 절차**

1. **EC2 인스턴스 시작**:
    - **Amazon Linux 2** 선택.
    - **User Data**:
        - Apache 웹 서버 설치 스크립트 작성 (httpd 설치).
        - 불필요한 마지막 줄(인덱스 파일 생성)은 제외.
    - **보안 그룹**:
        - 기존 보안 그룹(예: launch-wizard-1) 사용.
2. **인스턴스 실행 후 테스트**:
    - EC2 인스턴스 실행 및 Apache 설치 완료 여부 확인.
    - 퍼블릭 IP를 통해 기본 Apache 테스트 페이지 확인.
3. **AMI 생성**:
    - 실행 중인 인스턴스에서 **Actions → Image and templates → Create Image**.
    - 이름 설정 (예: `DemoImage`).
    - 생성 후 **AMI 목록**에서 상태 확인 (`Pending → Available`).

---

#### 3. **AMI 활용**

1. **AMI 기반 새로운 인스턴스 생성**:
    - **Instances → Launch Instance**:
        - **My AMIs** 탭에서 생성한 AMI 선택 (예: `DemoImage`).
    - **User Data**:
        - 필요한 명령만 추가 (httpd 재설치 방지).
        - 예: 파일 생성 명령 추가.
    - **보안 그룹**:
        - 기존 보안 그룹(예: launch-wizard-1) 사용.
    - 인스턴스 실행 후 퍼블릭 IP를 통해 웹 페이지 확인 (예: "Hello World").
2. **AMI의 장점**:
    - 동일한 설정의 EC2 인스턴스를 반복적으로 빠르게 생성 가능.
    - 부팅 시간 단축.
    - 소프트웨어 재설치 불필요.

---

#### 4. **사용자 데이터(User Data) 구성**

- **초기 스크립트**:
    - Apache 설치:
        
        ```bash
        #!/bin/bash
        yum update -y
        yum install -y httpd
        systemctl start httpd
        systemctl enable httpd
        ```
        
- **AMI 기반 인스턴스 생성 시 스크립트**:
    - 추가 작업만 수행:
        
        ```bash
        #!/bin/bash
        echo "Hello World" > /var/www/html/index.html
        ```
        

---

#### 5. **실습 결과**

- AMI 기반으로 생성된 인스턴스는 설정된 소프트웨어(httpd)를 포함하므로 실행 속도가 빠름.
- 기본 Apache 설정 후, 추가적인 사용자 데이터로 원하는 커스터마이징 가능.

---

#### 6. **시험 대비 포인트**

- **AMI 생성 및 활용 절차**:
    - EC2 인스턴스 시작 → 사용자 지정 → AMI 생성 → AMI 기반 인스턴스 실행.
- **User Data의 역할**:
    - 초기 구성 및 소프트웨어 설치.
    - AMI 재활용 시 불필요한 작업 제거.
- **AMI의 장점**:
    - 반복 작업 최소화, 부팅 시간 단축, 글로벌 복제 가능.

---

#### 7. **결론**

- AMI는 **EC2 인스턴스 관리 및 확장**에 있어 중요한 역할.
- 설정된 환경을 반복적으로 사용하고자 할 때 시간과 노력을 절약.
- 실습을 통해 AMI 생성 및 활용법을 익혀 다양한 시나리오에 적용 가능.

## 7. EC2 이미지 빌더 개요
---

#### 1. **EC2 이미지 빌더란?**

- **자동화된 이미지 생성 서비스**:
    - AMI(가상 머신 이미지)와 컨테이너 이미지를 생성, 유지, 검증, 테스트 자동화.
    - 사용자가 사전 정의한 구성 요소를 포함한 이미지를 생성.
- **주요 특징**:
    - **자동화**: 빌드, 테스트, 배포가 자동화.
    - **유연성**: 사용자 정의 작업 및 테스트 포함.
    - **글로벌 배포**: AMI를 여러 리전에 배포 가능.
    - **비용 효율성**: 이미지 빌더는 무료이며, 사용한 리소스(EC2 인스턴스, AMI 저장소) 비용만 지불.

---

#### 2. **작동 방식**

1. **EC2 이미지 빌더 서비스 실행**:
    - 서비스 시작 시, **빌더 EC2 인스턴스** 생성.
2. **이미지 빌드**:
    - 빌더 인스턴스에서 사용자 정의 작업 실행:
        - 예: 소프트웨어 설치, 시스템 업데이트, 방화벽 설정.
3. **AMI 생성**:
    - 사용자 정의 작업이 완료된 후 AMI 생성.
4. **테스트 인스턴스 생성 및 검증**:
    - **테스트 EC2 인스턴스**를 자동으로 생성.
    - 사전 정의된 테스트 실행:
        - AMI의 정상 동작 확인.
        - 보안 및 애플리케이션 실행 상태 점검.
    - 테스트는 선택적으로 건너뛸 수 있음.
5. **배포**:
    - 검증된 AMI를 여러 리전에 배포.

---

#### 3. **스케줄 및 실행**

- **스케줄링 옵션**:
    - 주간 또는 월간 일정 정의.
    - 패키지 업데이트 시 자동 실행.
    - 필요에 따라 수동 실행.
- **효율성**:
    - 자동 스케줄링으로 최신 소프트웨어 환경 유지.
    - 배포 자동화를 통한 관리 시간 절약.

---

#### 4. **비용**

- **EC2 이미지 빌더 서비스는 무료**.
- 비용 발생 항목:
    - **빌더 및 테스트 EC2 인스턴스** 사용 비용.
    - 생성된 **AMI의 저장 비용**.

---

#### 5. **활용 사례**

1. **운영 효율성 향상**:
    - 소프트웨어 업데이트 및 이미지 생성 프로세스 자동화.
2. **보안 강화**:
    - 정기 테스트를 통해 AMI의 보안 상태 점검.
3. **글로벌 배포**:
    - 여러 리전에서 동일한 AMI를 사용해 글로벌 애플리케이션 배포.
4. **비용 최적화**:
    - 반복 작업 감소로 관리 비용 절감.

---

#### 6. **시험 대비 포인트**

- **EC2 이미지 빌더의 주요 기능**:
    - 이미지 생성, 테스트, 배포.
- **작동 방식**:
    - 빌더 인스턴스 → AMI 생성 → 테스트 인스턴스 → 배포.
- **스케줄링 옵션**:
    - 주간/월간 스케줄, 패키지 업데이트 시 실행.
- **비용 구조**:
    - 서비스는 무료, 사용 리소스 비용만 지불.

---

#### 7. **결론**

- EC2 이미지 빌더는 **자동화된 이미지 관리**로 효율성과 보안을 높이는 데 필수적인 도구.
- 정기적인 업데이트와 글로벌 배포를 간소화.
- 무료 서비스로, 사용 리소스 비용만 지불해 비용 효율성을 극대화.

## 8. EC2 인스턴스 스토어
---

#### 1. **EC2 인스턴스 스토어란?**

- EC2 인스턴스가 실행되는 **물리적 서버에 연결된 하드웨어 디스크**.
- **임시 스토리지**:
    - EC2 인스턴스가 중지되거나 종료되면 스토리지 데이터 손실.
    - 장기 스토리지로는 부적합.

---

#### 2. **특징 및 활용**

1. **성능**:
    - **I/O 성능**이 뛰어나 **고속 처리**가 필요한 워크로드에 적합.
    - 예: i3 인스턴스의 인스턴스 스토어는 최대 **330만 Read IOPS**, **140만 Write IOPS** 제공.
    - 비교: **gp2 EBS 볼륨**(32,000 IOPS)보다 훨씬 빠름.
2. **활용 사례**:
    - **버퍼, 캐시, 스크래치 데이터**:
        - 임시로 저장되는 데이터에 적합.
    - **고속 데이터 처리**:
        - 데이터 분석, 대규모 파일 처리, 짧은 수명 데이터를 다루는 워크로드.
3. **제한 사항**:
    - 데이터 손실 위험:
        - EC2 인스턴스 중지/종료 시 데이터 유실.
        - 장기 데이터 저장소로 사용 불가.
    - 기본 서버 장애 시 데이터 손실 가능.

---

#### 3. **사용 시 주의점**

1. **데이터 백업 및 복제**:
    - 인스턴스 스토어 사용 시 데이터를 정기적으로 **백업**하거나 **복제** 필요.
2. **장기 데이터 스토리지**:
    - 장기 데이터를 저장하려면 **EBS 볼륨** 사용.
3. **워크로드 적합성**:
    - 고속 처리와 짧은 수명의 데이터에만 사용.

---

#### 4. **시험 대비 포인트**

- **EC2 인스턴스 스토어와 EBS의 차이**:
    - **인스턴스 스토어**:
        - 고속 처리, 데이터 유실 가능.
    - **EBS**:
        - 데이터 지속성 보장, 성능은 상대적으로 낮음.
- **활용 사례**:
    - 버퍼, 캐시, 임시 데이터 저장소.
- **데이터 손실 위험**:
    - 인스턴스 중지/종료 시 데이터 손실.

---

#### 5. **성능 비교 예시**

- **i3 인스턴스 스토어**:
    - Read IOPS: 최대 330만.
    - Write IOPS: 최대 140만.
- **EBS gp2 볼륨**:
    - 최대 32,000 IOPS.
- **결론**:
    - 인스턴스 스토어는 특정 워크로드에서 압도적인 성능 제공.

---

#### 6. **결론**

- **EC2 인스턴스 스토어**는 고속 처리 성능이 필요하지만 데이터 유실 위험을 감수할 수 있는 워크로드에 적합.
- 장기 데이터 저장소로는 적합하지 않으며, **EBS 볼륨**과 함께 사용해 데이터 유실을 방지하는 전략 필요.

## 9. EFS 개요
---

#### 1. **EFS란?**

- **Elastic File System (EFS)**:
    - **관리형 네트워크 파일 시스템 (NFS)**.
    - 여러 EC2 인스턴스에서 **동시에 마운트 가능**.
    - **Linux 기반 EC2 인스턴스**에서만 사용 가능.
- **주요 특징**:
    - **다중 AZ 지원**: 하나의 EFS 파일 시스템을 여러 가용 영역(AZ)의 EC2 인스턴스에서 공유 가능.
    - **확장성**: 데이터가 자동으로 확장 또는 축소.
    - **비용 구조**: 사용량 기반 지불 (요금제 없음).

---

#### 2. **EFS와 EBS의 비교**

|**특징**|**EBS**|**EFS**|
|---|---|---|
|**사용 가능 인스턴스**|한 번에 하나의 EC2 인스턴스에만 연결|여러 EC2 인스턴스에 동시에 연결|
|**가용 영역**|특정 AZ에 제한|여러 AZ에서 사용 가능|
|**데이터 공유**|불가능|모든 마운트 인스턴스 간 파일 공유 가능|
|**사용 사례**|데이터 지속성, 단일 워크로드|다중 인스턴스 및 파일 공유 워크로드|
|**비용**|상대적으로 저렴|EBS 대비 3배 비싸지만 사용량 기반 지불|

---

#### 3. **EFS 활용 사례**

1. **공유 파일 시스템**:
    - 다중 EC2 인스턴스 간 데이터 공유.
    - 애플리케이션 로그, 컨테이너 워크로드 등.
2. **다중 가용 영역**:
    - 고가용성을 요구하는 분산 애플리케이션.
3. **동시 읽기/쓰기**:
    - 여러 인스턴스에서 동시에 파일 접근이 필요한 워크로드.

---

#### 4. **EFS 스토리지 클래스**

- **EFS 표준**:
    - 일반적인 파일 저장.
- **EFS-IA (Infrequent Access)**:
    - 자주 접근하지 않는 파일을 저장.
    - **비용 절감**:
        - EFS 표준 대비 92% 더 저렴.
    - **수명 주기 관리**:
        - 액세스되지 않은 파일(예: 60일 동안 미사용)을 자동으로 EFS-IA로 이동.
        - 액세스 시 다시 EFS 표준으로 자동 이동.
    - **자동화**:
        - 애플리케이션에서는 파일 위치를 알 필요 없이 동일 방식으로 액세스 가능.

---

#### 5. **EFS와 EBS의 적합한 워크로드**

|**워크로드**|**EBS**|**EFS**|
|---|---|---|
|단일 EC2 인스턴스 사용|✅|❌|
|여러 EC2 인스턴스 공유 파일|❌|✅|
|장기 데이터 저장|✅|❌|
|고속 IOPS|✅|❌|
|다중 AZ 지원|❌|✅|

---

#### 6. **시험 대비 포인트**

- **EFS의 특징**:
    - 다중 AZ 지원, 여러 EC2 인스턴스에 동시 연결 가능.
- **EFS-IA**:
    - 비용 절감용 스토리지 클래스.
    - 수명 주기 정책을 기반으로 자동 파일 이동.
- **EBS와 EFS 차이점**:
    - 연결 가능 인스턴스 수, 데이터 공유 여부, 비용 구조.

---

#### 7. **결론**

- **EFS**는 **다중 인스턴스 데이터 공유** 및 **고가용성**이 필요한 워크로드에 적합.
- **EFS-IA**를 통해 비용 효율적으로 데이터 저장 가능.
- EBS와 EFS의 적합한 사용 사례를 이해하고, 워크로드에 맞는 스토리지를 선택.

## 10. EC2 스토리지를 위한 공동 책임 모델
---

#### 1. **AWS의 책임**

AWS는 **인프라와 기본적인 데이터 보호**를 책임집니다.

- **인프라 관리**:
    - 데이터 센터와 하드웨어의 유지보수 및 관리.
    - **결함 하드웨어 교체**: EBS, EFS 드라이브의 일부가 손상될 경우.
- **데이터 복제**:
    - EBS와 EFS는 데이터 복제를 통해 하드웨어 장애로부터 데이터를 보호.
- **직원 데이터 액세스 방지**:
    - 데이터 보호를 위한 물리적 및 논리적 접근 제어.

---

#### 2. **고객(사용자)의 책임**

AWS는 스토리지를 제공하지만, **데이터와 구성**은 고객의 책임입니다.

1. **백업 및 스냅샷**:
    - 데이터를 보호하기 위해 주기적으로 **백업** 생성.
    - EBS 스냅샷을 활용해 데이터 손실 대비.
2. **데이터 암호화**:
    - 데이터를 암호화하여 AWS나 다른 고객이 접근하지 못하도록 보호.
    - AWS Key Management Service (KMS) 사용 권장.
3. **스토리지 유형의 리스크 이해**:
    - **EBS**:
        - 데이터를 복제해 보호하지만 백업은 필요.
    - **EC2 인스턴스 스토어**:
        - 인스턴스 종료/중지 시 데이터 손실.
        - 하드웨어 장애 시 데이터 복구 불가.
        - 임시 데이터에만 사용.
4. **보안 설정**:
    - IAM 역할, 보안 그룹, NACL 등 AWS 보안 도구 활용.
    - 올바른 액세스 정책 정의.
5. **데이터 관리**:
    - 스토리지에 작성하는 모든 데이터는 고객의 책임.
    - 불필요한 데이터 삭제 및 효율적인 관리.

---

#### 3. **시험 대비 포인트**

- **AWS의 책임**:
    - 데이터 복제, 하드웨어 유지보수 및 장애 복구.
    - 데이터 센터의 보안 및 접근 제어.
- **고객의 책임**:
    - 데이터 백업, 암호화, 보안 설정.
    - EC2 인스턴스 스토어 사용 시 데이터 손실 리스크 관리.
- **공동 책임 모델의 이해**:
    - AWS는 인프라를 보호, 고객은 데이터와 구성 관리.

---

#### 4. **결론**

- AWS는 기본적인 인프라 보호와 데이터 복제를 제공하지만, 데이터의 안전성과 보안은 **고객의 책임**.
- 백업 및 암호화를 포함한 데이터 관리와 보안 설정이 핵심.
- EC2 스토리지 유형별로 리스크를 이해하고 적절한 대응 전략 마련 필수.


## 11. Amazon FSx 개요
---

#### 1. **Amazon FSx란?**

- AWS에서 제공하는 **타사 고성능 파일 시스템의 관리형 서비스**.
- EFS 또는 S3와는 다른 고급 파일 시스템을 제공.
- 주요 제공 유형:
    1. **FSx for Windows File Server**
    2. **FSx for Lustre**
    3. **FSx for NetApp ONTAP** (시험에는 중요하지 않음).

---

#### 2. **FSx for Windows File Server**

- **Windows 환경에 특화된 파일 시스템**:
    - Windows 기본 프로토콜 지원:
        - **SMB (Server Message Block)** 프로토콜.
        - **Windows NTFS** 파일 시스템.
    - **Microsoft Active Directory (AD)**와 통합 가능.
- **활용 사례**:
    - **Windows 클라이언트**와 **Windows 기반 EC2 인스턴스**에서 파일 공유.
    - 온프레미스 및 AWS 리소스에서 파일 시스템 액세스.
- **고가용성**:
    - 일반적으로 **다중 AZ에 배포**.
- **주요 장점**:
    - 완전 관리형, 신뢰성, 확장성.
    - Windows 파일 서버를 AWS에서 손쉽게 실행.

---

#### 3. **FSx for Lustre**

- **고성능 컴퓨팅(HPC)에 특화된 파일 시스템**:
    - Lustre는 **Linux**와 **Cluster**에서 파생된 이름.
- **사용 사례**:
    - 머신 러닝, 데이터 분석, 비디오 처리, 재무 모델링.
    - 초당 수백 GB의 데이터 교환 및 초당 수백만 IOPS.
    - 밀리초 미만의 지연 시간 제공.
- **통합 기능**:
    - **Amazon S3**와 백엔드 통합:
        - FSx for Lustre 데이터를 S3에 저장 가능.
        - S3 데이터를 FSx for Lustre 파일 시스템에서 처리.
- **장점**:
    - 고성능, 대규모 처리량, 저지연 파일 시스템.
    - HPC 환경에 최적화.

---

#### 4. **FSx for Windows와 FSx for Lustre 비교**

|**특징**|**FSx for Windows File Server**|**FSx for Lustre**|
|---|---|---|
|**대상 환경**|Windows 기반 애플리케이션|고성능 컴퓨팅 (HPC)|
|**지원 프로토콜**|SMB, NTFS|Lustre 파일 시스템|
|**주요 사용 사례**|Windows 파일 공유|머신 러닝, 데이터 분석|
|**저장소 통합**|Microsoft AD|Amazon S3|
|**지연 시간**|표준|밀리초 미만|

---

#### 5. **시험 대비 포인트**

- **FSx for Windows File Server**:
    - Windows 기반 파일 공유, SMB/NTFS 지원, Microsoft AD 통합.
- **FSx for Lustre**:
    - HPC용, S3와 통합, 저지연 고성능 스토리지.
- **활용 사례**:
    - FSx for Windows File Server: Windows 클라이언트 및 EC2와의 파일 공유.
    - FSx for Lustre: 머신 러닝, 대규모 데이터 분석.

---

#### 6. **결론**

- **Amazon FSx**는 AWS에서 타사의 고성능 파일 시스템을 관리형으로 제공.
- **FSx for Windows File Server**와 **FSx for Lustre**는 각기 다른 워크로드와 환경에 최적화.
- 시험에 자주 출제되는 주요 특징과 사용 사례를 숙지해야 함.

## 12. 과금 방지를 위한 실습 리소스 정리
---
#### 1. **실습 후 리소스 정리 이유**

- **비용 절감**:
    - AWS Free Tier를 초과 사용하지 않도록 리소스를 정리.
    - 불필요한 리소스를 남겨두면 과금될 수 있음.

---

#### 2. **정리해야 할 주요 리소스**

1. **EC2 인스턴스**:
    - 실행 중인 모든 인스턴스를 종료.
    - **Terminate Instances**: EC2 대시보드에서 전체 선택 후 Terminate 클릭.
    - **루트 EBS 볼륨**은 자동으로 삭제됨.
2. **EBS 볼륨**:
    - 수동으로 생성한 **추가 볼륨** 삭제.
        - EC2 대시보드의 **Volumes** 탭에서 선택 후 **Delete Volume** 클릭.
3. **Snapshots**:
    - 사용하지 않는 스냅샷 삭제.
        - **Snapshots** 탭에서 선택 후 **Actions → Delete** 클릭.
        - AMI와 연결된 스냅샷은 먼저 AMI를 삭제해야 함.
4. **AMIs**:
    - 사용자 정의 AMI 삭제:
        - **AMIs** 탭에서 선택 후 **Deregister** 클릭.
        - Deregister 후 해당 스냅샷 삭제 가능.

---

#### 3. **리소스 정리 절차**

1. **EC2 인스턴스 종료**:
    - EC2 대시보드 → **Instances** 탭 → 모든 인스턴스 선택 → **Terminate** 클릭.
2. **EBS 볼륨 삭제**:
    - EC2 대시보드 → **Volumes** 탭 → 추가 볼륨 선택 → **Delete Volume** 클릭.
3. **스냅샷 삭제**:
    - **Snapshots** 탭 → 스냅샷 선택 → **Actions → Delete** 클릭.
    - **AMI와 연결된 스냅샷**:
        - **AMIs** 탭 → AMI 선택 → **Deregister** 클릭 → Snapshots에서 삭제.
4. **새로 고침**:
    - EC2 대시보드 및 각 리소스 탭 새로 고침으로 정리 상태 확인.

---

#### 4. **비용이 발생하지 않는 리소스**

- **Key Pairs**:
    - AWS에 저장된 키 페어는 과금되지 않음.
- **Security Groups**:
    - 추가적인 비용이 없음.
- 삭제하지 않아도 무방.

---

#### 5. **최종 확인**

- **Instances**: 모든 인스턴스가 **Terminated** 상태.
- **Volumes**: 모든 EBS 볼륨 삭제.
- **Snapshots**: 모든 스냅샷 삭제.
- **AMIs**: 등록된 AMI 없음.

---

#### 6. **시험 대비 포인트**

- **루트 볼륨**은 인스턴스 종료 시 자동 삭제.
- **스냅샷과 AMI 관계**:
    - AMI를 Deregister해야 연결된 스냅샷 삭제 가능.
- **비용 발생 리소스**:
    - 실행 중인 인스턴스, 추가 EBS 볼륨, 스냅샷 등.

---

#### 7. **결론**

- AWS Free Tier 사용 후 리소스를 정리해 **추가 비용 발생 방지**.
- EC2 대시보드와 관련 탭에서 정리 상태를 최종 확인.
- 실습 후 항상 **리소스 정리**를 습관화.
