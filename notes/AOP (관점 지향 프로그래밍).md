# AOP(Aspect-Oriented Programming)
---
응용프로그램의 **여러 모듈**에 영향을 미치는 **횡단 관심사**(cross-cutting concerns)를 **모듈화**하는 프로그래밍 패러다임.
> [!NOTE] 횡단 관심사란?
> 로깅, 보안, 트랜잭션 관리 및 예외 처리와 같이 응용 프로그램의 여러 모듈에 영향을 주는 부분을 말한다.

AOP는 이러한 관심사를 응용 프로그램의 **핵심 비즈니스 로직**에서 **분리**하는 방법을 제공한다.

## 스프링의 AOP와 관련된 주요 개념 및 용어
---
1. **Aspect(어스펙트)**: 어스펙트는 횡단 관심사를 **캡슐화**하는 모듈입니다. 이는 일련의 조인 포인트와 해당 조인 포인트에서 실행할 어드바이스를 정의합니다. 스프링에서는 주로 `@Aspect`로 주석이 달린 일반 클래스를 사용하여 어스펙트를 구현합니다.
    
2. **Join Point(조인 포인트)**: 조인 포인트는 응용 프로그램 실행 중에 어스펙트의 어드바이스가 적용될 수 있는 특정 지점입니다. 메서드 호출, 객체 인스턴스화 또는 예외 처리와 같은 예시가 있습니다. 조인 포인트는 본질적으로 어스펙트를 플러그인할 수 있는 응용 프로그램 실행 흐름의 지점입니다.
    
3. **Advice(어드바이스)**: 어드바이스는 어스펙트의 특정 조인 포인트에서 취해지는 조치입니다. 스프링에서는 여러 유형의 어드바이스가 있습니다.
    
    - **Before advice(이전 어드바이스)**: 조인 포인트 이전에 실행됩니다.
    - **After returning advice(이후 반환 어드바이스)**: 조인 포인트가 정상적으로 완료된 후에 실행됩니다(예: 예외를 던지지 않고 메서드가 반환될 때).
    - **After throwing advice(이후 예외 어드바이스)**: 조인 포인트가 예외를 던질 때 실행됩니다.
    - **After advice(이후 어드바이스)**: 조인 포인트 이후에 실행됩니다(결과에 관계없이).
    - **Around advice(어라운드 어드바이스)**: 가장 강력한 어드바이스 유형으로, 조인 포인트 앞뒤로 사용자 정의 동작을 수행할 수 있습니다. 조인 포인트가 진행되거나 건너뛸지 여부를 제어할 수 있습니다.
4. **Pointcut(포인트컷)**: 포인트컷은 조인 포인트의 집합입니다. 이는 어드바이스가 적용되어야 하는 기준을 정의합니다. 포인트컷은 응용 프로그램에서 어떤 메서드 또는 클래스가 어스펙트에 의해 가로채져야 하는지를 지정합니다.
    
5. **Weaving(위빙)**: 위빙은 어스펙트를 응용 프로그램 코드에 지정된 조인 포인트에 통합하는 프로세스입니다. 스프링에서는 두 가지 유형의 위빙이 있습니다.
    
    - **컴파일 타임 위빙(Compile-time weaving)**: 어스펙트가 컴파일 프로세스 중에 클래스에 통합됩니다.
    - **런타임 위빙(Runtime weaving)**: 어스펙트가 런타임에서 클래스에 통합됩니다. 동적으로 또는 응용 프로그램이 시작될 때 이루어집니다.

스프링에서는 XML 구성, Java 구성 또는 어노테이션을 사용하여 AOP를 활성화할 수 있습니다. `@AspectJ` 어노테이션이 어스펙트를 선언하는 데 자주 사용되며 포인트컷은 주로 `@Pointcut` 어노테이션을 사용하여 정의됩니다.

다음은 어노테이션을 사용한 간단한 스프링 AOP 예제입니다.

```java
import org.aspectj.lang.annotation.Aspect;
import org.aspectj.lang.annotation.Before;
import org.aspectj.lang.annotation.Pointcut;

@Aspect
public class MyAspect {

    @Pointcut("execution(* com.example.service.*.*(..))")
    private void serviceMethods() {}

    @Before("serviceMethods()")
    public void beforeServiceMethod() {
        // 서비스 메서드 실행 전에 실행되는 어드바이스 로직
        System.out.println("서비스 메서드 실행 전");
    }
}
```
