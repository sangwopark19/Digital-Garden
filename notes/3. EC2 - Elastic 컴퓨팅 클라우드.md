## 1. AWS 예산 설정
---
#### 1. **IAM 사용자 결제 데이터 접근 활성화**

1. **루트 계정으로 로그인**:
    
    - **IAM 사용자**는 기본적으로 결제 데이터에 접근할 수 없음.
    - 루트 계정으로 **결제 데이터 IAM 액세스 활성화** 필요.
2. **결제 IAM 액세스 활성화 방법**:
    
    - **Account Settings** → **IAM Access to Billing Information** → **Activate IAM Access**.

---

#### 2. **결제 콘솔 탐색**

1. **Billing Overview**:
    
    - 현재 월 및 예상 월간 비용 확인.
    - 지난 달 및 이전 달 비용 확인.
2. **청구서(Bills)**:
    
    - 서비스별 비용 내역 제공.
    - 특정 서비스(예: EC2)의 사용량 및 청구 내역 분석 가능.
    - **월별 청구서** 선택 후 하단에서 **서비스별 요금(Charges by Service)** 확인.
3. **프리 티어(Free Tier)**:
    
    - 현재 사용량과 **프리 티어 한도** 비교.
    - 초과 시 빨간색 경고 표시.

---

#### 3. **예산 설정 및 알림**

1. **예산 생성 위치**:
    
    - **Billing Console** → **Budgets** → **Create Budget**.
2. **예산 생성 과정**:
    
    - **지출 없는 예산**:
        
        - 예산 이름: "No Spending Budget".
        - 목표: **0.01달러** 도달 시 알림.
        - 알림 수신 이메일 입력.
    - **월간 비용 예산**:
        
        - 예산 이름: "Monthly Budget".
        - 목표: **10달러** 도달 시 알림.
        - 알림 조건:
            - **85% 도달** 시 알림.
            - **100% 도달** 시 알림.
            - **예상 지출이 100%에 도달 예상** 시 알림.
3. **알림 수신 내용**:
    
    - 실시간으로 **예산 초과 상황** 이메일 수신.

---

#### 4. **예산 설정 모범 사례**

- **지출 없는 예산** 설정:
    
    - 0.01달러 초과 시 즉시 알림.
    - 사용하지 않을 리소스를 빠르게 식별 및 제거.
- **월간 예산 설정**:
    
    - 현실적인 예산(예: 10달러)으로 비용 초과 방지.
    - 예산 초과 예상 시 조기 알림으로 대응 가능.
- **프리 티어 모니터링**:
    
    - 무료로 제공되는 리소스 사용량을 지속적으로 확인.
    - 초과 사용으로 인한 불필요한 비용 방지.

---

#### 5. **AWS 비용 문제 해결**

1. **청구서**:
    
    - 서비스별 사용 내역 분석.
    - 불필요한 서비스 식별 후 사용 중지.
2. **프리 티어 대시보드**:
    
    - 무료 한도 초과 여부 실시간 확인.
3. **예산 알림**:
    
    - 초과 지출 가능성을 조기에 식별하여 비용 관리.

---

#### 6. **핵심 요약**

- **IAM 사용자 결제 데이터 접근 활성화**로 관리 효율성 증대.
- **예산 및 알림 설정**으로 과도한 비용 발생 방지.
- **청구서 및 프리 티어 사용량 분석**으로 비용 투명성 확보.

---

## 2. EC2 기초
---
#### 1. **Amazon EC2란?**

- **Elastic Compute Cloud**의 약자.
- AWS의 가장 인기 있는 서비스로, **서비스형 인프라(IaaS)** 제공.
- **주요 기능**:
    - 가상 머신(EC2 인스턴스) 임대.
    - 데이터 저장(EBS, EFS).
    - 부하 분산(Elastic Load Balancer).
    - 자동 확장(Auto Scaling Group).

---

#### 2. **EC2의 주요 구성 요소**

1. **운영 체제 선택**:
    
    - 리눅스(가장 인기 있음), 윈도우, 맥OS.
2. **컴퓨팅 리소스**:
    
    - vCPU(가상 CPU) 및 RAM 크기 선택.
    - 스토리지 유형: EBS, EFS, EC2 인스턴스 스토어.
3. **네트워크 설정**:
    
    - 공용 IP, 네트워크 속도 및 카드 설정.
4. **보안 그룹**:
    
    - **방화벽 규칙** 정의.
    - EC2 인스턴스와 외부 트래픽 간 허용/차단 규칙 설정.
5. **사용자 데이터 스크립트**:
    
    - **부트스트래핑**을 위한 초기화 스크립트 실행.
    - 업데이트, 소프트웨어 설치, 파일 다운로드 등 자동화 가능.

---

#### 3. **사용자 데이터 스크립트 (User Data Script)**

- **의미**:
    - 인스턴스 부팅 시 실행되는 초기화 스크립트.
    - 부팅 시 1회 실행 후 종료.
- **사용 사례**:
    - 시스템 업데이트.
    - 필요한 소프트웨어 설치.
    - 웹사이트 배포 및 설정.
- **특징**:
    - 루트 계정으로 실행되며, `sudo` 명령어 필요.

---

#### 4. **EC2 인스턴스 종류**

|인스턴스 종류|vCPU|메모리|스토리지|네트워크 성능|
|---|---|---|---|---|
|**t2.micro**|1|1GB|EBS 전용|낮음 ~ 중간|
|**t2.xlarge**|4|16GB|EBS 전용|중간|
|**c5d.4xlarge**|16|32GB|NVMe SSD(400GB)|최대 10Gbps|
|**r5.16xlarge**|64|512GB|EBS 전용|고성능|
|**m5.8xlarge**|32|128GB|EBS 전용|고성능|

---

#### 5. **t2.micro 인스턴스 (프리 티어)**

- **특징**:
    - AWS 프리 티어에 포함.
    - 한 달에 750시간 사용 가능(1년 동안 무료).
- **사용 사례**:
    - 강의 실습 및 테스트 환경.

---

#### 6. **EC2의 강점**

- **유연성**: 요구에 맞는 가상 머신 선택 가능.
- **확장성**: 필요에 따라 자원을 추가하거나 축소 가능.
- **자동화**: 사용자 데이터 스크립트를 활용한 초기 작업 자동화.

---

## 3. 웹 사이트 실습을 위한 EC2 사용자 데이터로 EC2 인스턴스 생성
---
#### **1. EC2 인스턴스 실행 과정**

1. **AWS 콘솔에서 EC2 인스턴스 실행**:
    - EC2 콘솔 접속 → **Instances** 클릭 → **Launch instances** 클릭.
2. **인스턴스 이름 추가**:
    - "My First Instance" 입력.
3. **운영 체제 선택**:
    - Quick Start에서 **Amazon Linux 2 AMI** 선택.
4. **인스턴스 유형 설정**:
    - **t2.micro** 선택 (프리 티어 무료 제공, 한 달 750시간 가능).
5. **키 쌍 생성 및 다운로드**:
    - 키 쌍 이름: **EC2 Tutorial**.
    - 키 형식:
        - **.pem**: Mac/Linux/Windows 10 이상.
        - **.ppk**: Windows 7/8.
6. **네트워크 설정**:
    - 보안 그룹 설정:
        - **SSH(포트 22)** 및 **HTTP(포트 80)** 허용.
7. **스토리지 구성**:
    - 기본 설정 유지 (8GiB, EBS SSD).
8. **사용자 데이터 추가**:
    - EC2 인스턴스 실행 시 자동으로 웹 서버 및 기본 HTML 파일 설정.

```bash
#!/bin/bash
yum update -y
yum install -y httpd
systemctl start httpd
systemctl enable httpd
echo "Hello World from $(hostname -I)" > /var/www/html/index.html
```

9. **인스턴스 시작**:
    - "Launch Instance" 클릭 → "View All Instances"에서 상태 확인.

---

#### **2. 웹 서버 확인**

1. **퍼블릭 IP 주소로 웹 서버 확인**:
    - **퍼블릭 IPv4 주소** 복사 → `http://<퍼블릭 IP>` 접속.
    - 페이지에 "Hello World from [프라이빗 IP]" 표시.
2. **주의**:
    - 반드시 **http://**로 접속.
    - 처음 실행 시 약간의 대기 시간 필요.

---

#### **3. EC2 인스턴스 관리**

1. **멈추기 (Stop)**:
    - **Instance state → Stop instance** 선택.
    - 퍼블릭 IP는 삭제되지만, EBS 스토리지는 유지.
    - 비용 청구 중지.
2. **다시 시작 (Start)**:
    - **Instance state → Start instance** 선택.
    - 새 퍼블릭 IP 할당 (이전과 다를 수 있음).
3. **제거 (Terminate)**:
    - **Instance state → Terminate instance**.
    - 인스턴스와 연결된 스토리지 삭제.

---

#### **4. 실습에서의 주요 포인트**

1. **퍼블릭 IP의 변화**:
    - 인스턴스가 멈췄다가 시작되면 퍼블릭 IP가 변경됨.
    - 프라이빗 IP는 변경되지 않음.
2. **프리 티어 활용**:
    - t2.micro로 한 달 750시간 무료 이용 가능.
3. **웹 서버 상태**:
    - 사용자 데이터 스크립트로 초기화된 상태로 유지.

---

## 4. EC2 인스턴스 유형 기본 사항
---
#### **1. 인스턴스 이름 규칙**

AWS 인스턴스 이름은 특정 의미를 내포합니다.

- **예시:** `m5.2xlarge`
    - **`m` (클래스):** 범용 인스턴스.
    - **`5` (세대):** 5세대 하드웨어.
    - **`2xlarge` (크기):** 2배 크기의 대형 인스턴스. 크기에 따라 메모리와 CPU가 증가.

---

#### **2. 주요 인스턴스 유형**

1. **범용 (General Purpose)**
    
    - **특징:** 컴퓨팅, 메모리, 네트워킹의 균형.
    - **사용 사례:** 웹 서버, 코드 저장소, 소규모 데이터베이스.
    - **예시:** `t2.micro`, `m5.large`.
    - **강의 사용:** **`t2.micro`** (프리 티어 제공).
2. **컴퓨팅 최적화 (Compute Optimized)**
    
    - **특징:** 높은 컴퓨팅 성능 제공.
    - **사용 사례:** HPC(고성능 컴퓨팅), 머신 러닝, 게임 서버.
    - **예시:** `c5.large`, `c6g.xlarge`.
3. **메모리 최적화 (Memory Optimized)**
    
    - **특징:** RAM(메모리) 집중적 작업에 적합.
    - **사용 사례:** 대규모 데이터베이스, 실시간 처리.
    - **예시:** `r5.large`, `x1e.xlarge`.
4. **스토리지 최적화 (Storage Optimized)**
    
    - **특징:** 대규모 로컬 데이터 처리에 최적화.
    - **사용 사례:** 데이터 웨어하우징, 분산 파일 시스템.
    - **예시:** `i3.large`, `h1.4xlarge`.

---

#### **3. 인스턴스 비교 예시**

|**인스턴스 이름**|**vCPU**|**메모리 (GB)**|**네트워크 성능**|**특징**|
|---|---|---|---|---|
|`t2.micro`|1|1|낮음~중간|프리 티어 제공.|
|`r5.16xlarge`|64|512|높음|메모리 최적화.|
|`c5d.4xlarge`|16|32|최대 10Gbps|컴퓨팅 최적화.|

---

#### **4. 인스턴스 유형과 요금 비교 사이트**

- **사이트:** [instances.vantage.sh](https://instances.vantage.sh/)
    - AWS의 모든 EC2 인스턴스 정보를 검색 및 비교 가능.
    - 요금, 메모리, vCPU, 네트워크 성능 등의 상세 정보 제공.
    - AWS 사용자에게 유용한 도구.

---

#### **5. AWS 프리 티어와 t2.micro**

- **프리 티어 제공 인스턴스:** `t2.micro`.
- **제공 시간:** 한 달에 최대 **750시간**.
- **특징:** 소규모 애플리케이션 및 실습에 적합.

---


## 5. 보안 그룹 및 클래식 포트 개요
---
### **AWS EC2 보안 그룹 개요**

AWS 보안 그룹은 EC2 인스턴스 주변의 방화벽 역할을 하며, 네트워크 트래픽의 인바운드(들어오는 트래픽)와 아웃바운드(나가는 트래픽)를 제어합니다. 다음은 보안 그룹의 주요 개념과 사용법을 요약한 내용입니다.

---

#### **1. 보안 그룹의 특징**

1. **기능:**
    
    - **허용 규칙만 포함:** 허용된 트래픽만 EC2 인스턴스에 도달 가능.
    - **IP 주소 또는 보안 그룹 참조:** 특정 IP 범위 또는 다른 보안 그룹을 기준으로 설정.
    - **기본 설정:** 모든 인바운드 트래픽은 차단되고, 모든 아웃바운드 트래픽은 허용.
2. **다중 연결:**
    
    - 하나의 보안 그룹이 여러 인스턴스에 연결 가능.
    - 하나의 인스턴스가 여러 보안 그룹을 가질 수도 있음.
3. **위치 제한:**
    
    - 특정 **리전**과 **VPC**에만 적용.
    - 다른 리전이나 VPC로 전환 시 새로운 보안 그룹 생성 필요.
4. **EC2 외부에서 작동:**
    
    - EC2 인스턴스 외부에 위치하며 트래픽을 EC2에 도달하기 전에 차단.

---

#### **2. 보안 그룹 규칙**

1. **인바운드 규칙:**
    
    - EC2 인스턴스로 들어오는 트래픽을 제어.
    - 프로토콜(TCP/UDP), 포트 번호, 소스(IP 범위)로 정의.
2. **아웃바운드 규칙:**
    
    - EC2 인스턴스에서 나가는 트래픽을 제어.
    - 기본적으로 모든 트래픽 허용.
3. **규칙 예시:**
    
    - **소스 IP 범위:** `0.0.0.0/0` (모든 IP 허용), `203.0.113.0/24` (특정 서브넷 허용).
    - **특정 포트:** 22번(SSH), 80번(HTTP), 443번(HTTPS).

---

#### **3. 포트 번호 요약**

- **22번 (SSH):** 리눅스 인스턴스에 로그인.
- **21번 (FTP):** 파일 전송.
- **22번 (SFTP):** 안전한 파일 전송(SSH 사용).
- **80번 (HTTP):** 보안되지 않은 웹 트래픽.
- **443번 (HTTPS):** 보안 웹 트래픽.
- **3389번 (RDP):** 윈도우 인스턴스에 원격 로그인.

---

#### **4. 고급 보안 그룹 기능**

1. **다른 보안 그룹 참조:**
    
    - 특정 보안 그룹에서 다른 보안 그룹을 참조해 규칙 생성.
    - 예: 로드 밸런서와 EC2 간 통신을 허용하기 위해 보안 그룹 간 연결 설정.
2. **보안 그룹 문제 해결:**
    
    - **타임아웃:** 인바운드 규칙이 제대로 설정되지 않음.
    - **연결 거부:** 애플리케이션이 실행 중이지 않거나 오류 발생.
3. **최고의 실무:**
    
    - SSH 액세스를 위해 별도의 보안 그룹 생성 권장.
    - 필수적인 규칙만 추가하여 최소 권한의 원칙 적용.

---

#### **5. 다이어그램 예시**

- **보안 그룹과 트래픽 흐름:**
    
    - 인바운드 규칙: EC2 인스턴스로 들어오는 트래픽 제어.
    - 아웃바운드 규칙: EC2 인스턴스에서 나가는 트래픽 제어.
- **보안 그룹 간 참조:**
    
    - 보안 그룹 1 ↔ 보안 그룹 2: 서로 통신 허용.
    - 보안 그룹 3: 통신 차단.

---


## 6. 보안 그룹 실습
---
#### 1. **보안 그룹 개요**

- **Security Groups**는 EC2 인스턴스의 네트워크 트래픽을 제어하는 방화벽 역할을 합니다.
- 보안 그룹은 **인바운드(Inbound)**와 **아웃바운드(Outbound)** 규칙을 포함합니다.
- **인바운드 규칙**: 외부에서 인스턴스로 들어오는 연결을 제어.
- **아웃바운드 규칙**: 인스턴스에서 외부로 나가는 연결을 제어.

---

#### 2. **보안 그룹 탐색**

- **EC2 콘솔**의 사이드 메뉴에서 `Network & Security > Security Groups`를 클릭해 확인.
- 기본적으로 두 가지 보안 그룹이 존재:
    1. 기본 보안 그룹 (자동 생성)
    2. **launch-wizard-1**: 인스턴스 생성 시 자동으로 만들어짐.

---

#### 3. **보안 그룹의 주요 속성**

- 보안 그룹마다 고유 **ID**가 있으며, 이는 EC2 인스턴스를 식별하는 역할을 함.

---

#### 4. **인바운드 규칙**

- 외부에서 인스턴스로 연결을 허용하는 설정.
- 예시:
    - **SSH (22번 포트)**: 모든 위치(0.0.0.0/0)에서 접근 가능.
    - **HTTP (80번 포트)**: 모든 위치에서 웹 서버에 연결 허용.
- 규칙 편집 시:
    - 모든 위치(CIDR: `0.0.0.0/0`)로 설정하거나 특정 IP만 허용 가능 (`My IP`).
    - 특정 프로토콜(예: HTTPS)을 선택하면 포트가 자동 설정됨.

---

#### 5. **규칙 테스트 및 문제 해결**

- 규칙 삭제 후 테스트:
    - HTTP 규칙 삭제 시, 웹 페이지 접속 불가.
    - 규칙 복구 후 새로 고침 시 정상 작동.
- **시간초과(Time-out)** 발생 원인:
    - 보안 그룹 규칙이 올바르게 설정되지 않았을 가능성 높음.
    - 필요한 규칙을 추가하면 문제 해결 가능.

---

#### 6. **아웃바운드 규칙**

- 기본적으로 **IPv4 모든 위치**로 트래픽이 허용됨.
- EC2 인스턴스가 인터넷에 접근 가능하도록 설정.

---

#### 7. **보안 그룹의 확장성**

- 한 인스턴스에 여러 보안 그룹 연결 가능.
- 하나의 보안 그룹을 여러 인스턴스에 연결 가능.
- 각 보안 그룹에 개별 규칙을 설정할 수 있음.

---

#### 8. **추가 설정 가능 요소**

- **CIDR Blocks**, **Security Groups**, **Prefix Lists**를 사용해 세부적으로 규칙 설정 가능.
- **My IP**로 설정 시, IP 변경 시 주의 필요.

---

## 7. SSH 개요
---
